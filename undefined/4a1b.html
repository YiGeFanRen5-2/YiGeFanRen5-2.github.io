<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>java学习笔记（二十四） - MySQL数据库 | 执笔のNote</title><meta name="keywords" content="Java"><meta name="author" content="执笔"><meta name="copyright" content="执笔"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#18171d"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="java学习笔记（二十四） - MySQL数据库"><meta name="application-name" content="java学习笔记（二十四） - MySQL数据库"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#18171d"><meta property="og:type" content="article"><meta property="og:title" content="java学习笔记（二十四） - MySQL数据库"><meta property="og:url" content="http://yigefanren5-2.github.io/undefined/4a1b.html"><meta property="og:site_name" content="执笔のNote"><meta property="og:description" content="数据库基本指令1234567891011net start mysql &amp;#x2F;&amp;#x2F;启动mysql服务net stop mysql &amp;#x2F;&amp;#x2F;停止mysql服务&amp;#x2F;&amp;#x2F;本机默认端口3306登入mysql -u root -p &amp;#x2F;&amp;#x2F;进入mysql管理终端 -u 用户名 -p 密码(此处可不写，回车后再填也可以) &amp;#x2F;&amp;#x2F;连"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://zhib0.oss-cn-hangzhou.aliyuncs.com/img/mysql20240610.jpg"><meta property="article:author" content="执笔"><meta property="article:tag" content="java,CREO"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://zhib0.oss-cn-hangzhou.aliyuncs.com/img/mysql20240610.jpg"><meta name="description" content="数据库基本指令1234567891011net start mysql &amp;#x2F;&amp;#x2F;启动mysql服务net stop mysql &amp;#x2F;&amp;#x2F;停止mysql服务&amp;#x2F;&amp;#x2F;本机默认端口3306登入mysql -u root -p &amp;#x2F;&amp;#x2F;进入mysql管理终端 -u 用户名 -p 密码(此处可不写，回车后再填也可以) &amp;#x2F;&amp;#x2F;连"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://yigefanren5-2.github.io/undefined/4a1b"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//hm.baidu.com"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="manifest" href="/manifest.json"/><meta name="msapplication-TileColor" content="var(--anzhiyu-main)"/><link rel="mask-icon" href="/img/siteicon/apple-icon-180.png" color="#5bbad5"/><link rel="apple-touch-icon" sizes="180x180" href="/img/siteicon/apple-icon-180.png"/><link rel="apple-touch-icon-precomposed" sizes="180x180" href="/img/siteicon/apple-icon-180.png"/><link rel="icon" type="image/png" sizes="32x32" href="/img/siteicon/32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/img/siteicon/16.png"/><link rel="bookmark" href="/img/siteicon/apple-icon-180.png"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2048-2732.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2732-2048.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1668-2388.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2388-1668.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1536-2048.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2048-1536.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1668-2224.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2224-1668.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1620-2160.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2160-1620.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1290-2796.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2796-1290.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1179-2556.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2556-1179.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1284-2778.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2778-1284.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1170-2532.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2532-1170.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1125-2436.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2436-1125.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1242-2688.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2688-1242.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-828-1792.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1792-828.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1242-2208.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2208-1242.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-750-1334.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1334-750.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-640-1136.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1136-640.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?aa21190fc8b513826b65d188c3682ea5";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>const GLOBAL_CONFIG = {
  linkPageTop: {"enable":true,"title":"与数百名博主无限进步","addFriendPlaceholder":"昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，我会上传到我自己的图床）：\n描述：\n站点截图（可选）：\n"},
  peoplecanvas: undefined,
  postHeadAiDescription: undefined,
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！欢迎下次再来哦！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: 'https://blog-five-beige-67.vercel.app',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: {"mode":"both","api":"https://img2color-go.vercel.app/api?img=","cover_change":true},
  authorStatus: {"skills":["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙","🤝 专修交互与设计","🏃 脚踏实地行动派","🧱 团队小组发动机","💢 壮汉人狠话不多"]},
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    simplehomepage: false,
    post: true
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: 执笔","link":"链接: ","source":"来源: 执笔のNote","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '执笔のNote',
  title: 'java学习笔记（二十四） - MySQL数据库',
  postAI: '',
  pageFillDescription: '数据库, 基本指令, 数据库三层结构, 数据库的范式, 存储方式, SQL语句的分类, 数据库操作, 创建数据库, 查看、删除数据库, 备份和恢复数据库, 备份数据库, 恢复数据库, 表, 创建表, 备份和回复表, 修改表, 表复制, 显示表结构, Mysql常用的数据类型（列类型）, 整数类型, 位类型, 小数, 字符串, 数据库crud, insert 添加数据, update 修改数据, delete 删除数据, select 查询数据, 使用表达式对查询的列进行运算, 给列取别名, where 选择查询, order by 排序查询, count 合计函数, sum 求和, AVG 平均值, Max/Min 最大/最小值, group by 分组, 字符串相关函数, 数学相关函数, 时间日期相关函数, 加密和系统函数, 流程控制函数, 单表查询, limit分页查询, 数据分组, 多表查询, 笛卡尔集, 自连接, 子查询, 单行子查询, 多行子查询, 临时表查询, all操作符, any操作符, 多列子查询, 合并查询, union all, union, 外连接, 左外连接, 右外连接, Mysql约束, primary key（主键）, not null(非空), unique(唯一), foreign key(外键), check, 自增长, 索引, 原理, 类型, 事务, 事务和锁, 隔离级别, acid特性, 原子性（Atomicity）, 一致性(Consistency), 隔离性(lsolation), 持久性(Durability), 表类型和存储引擎, 介绍, 特点, 选择, 视图, 视图和基表的关系, 基本使用, 细节, 特点, Mysql管理, 操作, mysql权限, 给用户授权, 语法, 说明, 回收用户授权, 权限生效指令, 细节, 案例数据库基本指令启动服务停止服务本机默认端口登入进入管理终端用户名密码此处可不写回车后再填也可以连接数据库指令主机端口用户名密码密码不需要待空格密码密码可以省略回车后再输入主机默认本机端口默认刷新权限数据库三层结构所谓的安装数据库就是在主机安装一个数据库管理系统这个管理程序可以管理多个数据库一个数据库中可以创建多个表以保存数据信息普通表的本质仍然是文件数据库的范式第一范式列不可再分第二范式一张表只表达一层含义只描述一件事情第三范式表中的每一列和主键都是直接依赖关系而不是间接依赖数据库设计的范式和数据库的查询性能很多时候是相悖的我们需要根据实际的业务情况做一个选择查询频次不高的情况下我们更倾向于提高数据库的设计范式从而提高存储效率查询频次较高的情形我们更倾向于牺牲数据库的规范度降低数据库设计的范式允许特定的冗余从而提高查询的性能存储方式表的一行称为一条记录在程序中一行记录往往用对象表示语句的分类数据定义语句表库数据操作语句增加修改删除数据查询语句数据控制语句管理数据库比如用户权限数据库操作创建数据库指定数据库采用的字符集默认指定数据库字符集的校对规则通常采用区分大小写不区分大小写默认是规避关键字可以用反引号创建数据库使用反引号规避关键字查看删除数据库显示数据库显示创建数据库语句删除数据库备份和恢复数据库备份数据库在下执行用户名数据库数据库数据库文件名案例恢复数据库进入再执行文件名案例表创建表备份和回复表备份数据库的表用户名密码数据库表表表文件名修改表修改表名表名新表名修改表字符集表名字符集修改列使其长度为表复制自我复制数据蠕虫复制表复制蠕虫复制自我复制把表复制到表自我复制每执行一次翻倍删除一张重复的表先创建一张让有重复的记录把表的结构列复制到考虑去重创建一个新的临时空表该表结构与一致将通过关键字处理后把记录复制到表清除的所有记录把表的记录复制到删除掉表显示表结构显示表结构可以查看表所有的列表名案例常用的数据类型列类型整数类型在满足需求的情况下尽量选者占用空间小的数据类型定义无符号的整数默认是有符号的无符号定义位类型字段显示时按照位的方式显示查询的时候仍然可以使用添加的数值基本使用范围小数单精度双精度可以支持更加精确的小数位是小数位数精度的总数是小数点标度后面的位数如果是则没有小数点最大最大是如果被省略默认是如果被省略默认是字符串固定长度字符串最大字符可变长度字符最大字节编码最大字符其中字节用于记录大小数据库添加数据案例细节插入的数据应与字段的数据类型相同比如把添加到类型会错误数据的长度应在列的规定范围内例如不能将一个长度为的字符串加入到长度为的列中在中列出的数据位置必须与被加入的列的排列位置相对应字符和日期型数据应包含在单引号中列可以插入空值前提是该字段允许为空列名形式添加多条记录如果是给表中的所有字段添加数据可以不写前面的字段名称默认值的使用当不给某个字段值时如果有默认值就会添加否则报错修改数据案例细节语法可以用新值更新原有表行中的各列子句指示要修改哪些列和要给予哪些值子句指定应更新哪些行如没有子句则更新所有的行如果需要修改多个字段可以通过字段值字段值删除数据案例细节如果不使用子句将删除表中所有数据语句不能删除某一列的值可使用设为或者使用语句仅删除记录不删除表本身如要删除表使用语句表名查询数据案例细节指定查询哪些列的数据指定列名号代表查询所有列指定查询哪张表可选指显示结果时是否去掉重复数据使用表达式对查询的列进行运算给列取别名名字选择查询比较运算符大于小于大于小于等于不等于显示某一区间的值显示在列表中的值张模糊查询判断是否为空逻辑运算符多个条件同时成立多个条件任一条件成立不成立排序查询案例细节指定排序的列排序的列既可以是表中的列名也可以是语句后指定的列名升序默认降序子句应位于语句的结尾合计函数案例细节如果该值是就不会统计返回行的总数和列的区别返回满足条件的记录的行数列统计满足条件的某列有多少但是会排除为的情况求和统计一个班级语文英语数学各科的总成绩数学总分英语总分语文总分平均值求一个班级总分平均分最大最小值函数的使用求班级最高分和最低分分组显示平均工资低于的部门号和它的平均工资别名显示均工资低于的部门号使用子句对分组后的结果进行过滤显示平均工资低于的部门号和它的平均工资字符串相关函数返回字串字符集连接字符串返回在中出现的位置没有就返回转换成大写转换成小写从中的左边起取个字符长度按照字节在中用替换逐字符比较两个字符串从的开始从开始计算取个字符去除前端空格或后端空格字符串相关的函数的使用返回字串字符集连接子串将多个列拼接成一列工作是返回在中出现的位置没有返回亚元表系统表可以作为测试表使用转换成大写转换成小写从中的左边起取个字符从中的右边起取个字符长度按照字节在中用替换经理逐字符比较量字串大小从的开始从开始计算去除前端空格或后端空格执笔执笔执笔以首字母小写的方式显示所有员工的姓名首字母小写获取除首字母的所有字母拼接第二种方式获取首字母小写替换第一个字母数学相关函数绝对值十进制转二进制向上取整得到比大的最小整数进制转换向下取整得到比小的最大整数保留小数位数转十六进制求最小值求余返回一个随机浮点值范围诺已指定一个整数则它被用作种子值用来产生重复序列数学相关函数绝对值十进制转二进制向上取整得到比大的最小整数进制转换全称转换是十进制数转换为进制输出向下取整得到比小的最大整数保留小数位数四舍五入转十六进制求最小值求余其范围为随机数会变的随机数一旦执行就不变化的随机数不变随机数不变化时间日期相关函数当前时间当前日期当前时间戳返回的日期部分在中加上日期或时间在中减去日期或时间两个日期时间差结果是多少天两个时间差多少小时多少分钟多少秒当前时间年月日日期时间相关函数的使用当前日期当前时间当前时间戳创建一张存放信息的表新闻联播浙江新闻广州新闻上应用实例显示所有新闻信息发布日期只显示日期不用显示时间请查询在分钟内发布的帖子请在的语句中求出和相差多少天请用的语句求出你活了多少天练习如果你能活岁求出你还能活多少天练习先求出活岁时的日期计算还能活多少天返回的是到现在的秒数可以把秒数转成指定格式的日期固顶格式表示年月日时分秒意义在开发中存放一个整数然后表示时间通过转换加密和系统函数查询用户数据库名称为字符串算出一个位的字符串用户密码加密从原文密码计算并返回密码字符串通常用于对数据库的用户密码加密加密和系统函数使用查询用户可以查看登入到的有哪些用户以及登入的用户地址查询当前使用数据库的名称为字符串算出一个的字符串常用用户密码加密密码是加密在数据库中存放的加密后的密码演示用户表存放密码是执笔执笔加密函数数据库的用户密码就是函数加密表示数据库表流程控制函数如果为则返回否则返回如果不为空则返回否则返回类似多重分支如果为则返回如果为返回否则返回流程控制语句如果为就返回否则返回北京上海如果不为空则返回否则返回执笔类似多重分支如果为则返回如果为返回否则返回查询表如果是则显示判断是否为要使用半段不为空使用如果表是是则显示职员显示经理显示销售人员其他正常职员经理销售人员单表查询即单张表查询查询加强使用子句如何查找后入职的员工在中日期类型可以直接比较如何使用操作符表示到多个字符表示单个字符如何显示首字符为的员工姓名和工资如何显示第三个字符为大写的所有员工的姓名和工资如何显示没有上级的雇员的情况查询表结构分页查询公式每页显示记录数第几页每页显示的记录数按照雇员的号降序取出每页显示条记录分别显示第页第页对应的语句第三页第五页数据分组请统计各个部门的平均工资并且是大于的并且按照平均工资从高到纸排序取出前两行记录多表查询基于多个表进行查询笛卡尔集在默认情况下当两个表查询时规则从第一张表中取出一行和第二张表中的每一行进行组合返回结果含有两张表的所有列一共返回的记录数第一张表行数第二张表的行数多表默查询返回的结果称为笛卡尔集解决方案添加过滤条件自连接指在同一张表的连接查询将一张表看做两张表多表查询自连接显示公司员工和他的上级的名字员工名字在上级的名字在员工和上级是通过表的列关联自连接特点把同一张表当做两张表使用需要给表取别名格式表别名职员名上级名子查询指嵌入在其他语句中的语句也叫嵌套查询单行子查询指只返回一行数据的子查询语句子查询使用嵌套查询如何显示与同一部门的所有员工单行子查询先把查询到的的部门得到把上面查询的语句当做一个子查询来使用多行子查询返回多行数据的子查询使用关键字多行子查询如何查询和部门的工作相同的雇员名字岗位工资部门号但是不含号部门自己的雇员先获取号部门有哪些职位名字岗位工资部门号但是不含号部门自己的雇员不等于也可以换成临时表查询将子查询当做一张临时表操作符显示工资比部门的所有员工的工资高的员工姓名工资和部门号操作符显示工资比部门的其中一个高员工的工资高的员工姓名工资和部门号多列子查询返回多个列数据多列子查询查询与的部门和岗位完全相同的所有雇员并且不含本人先获取本人你的部门和岗位信息查询与的部门和岗位完全相同的所有雇员并且不含本人合并查询用于取得两个结果集的并集使用该操作符时不会取消重复行将两个查询结果合并不会去重用于取得两个结果集的并集使用该操作符时会取消重复行将两个查询结果合并会去重外连接左外连接左侧的表完全显示左外连接右外连接右侧的表完全显示右外连接显示所有成绩如果没有名字匹配显示空即右边的表和左表没有匹配的记录也会把右表的记录显示出来约束约束用于确保数据库满足特定的商业规则主键一张表的主键一般情况下设计原则与业务无关无实际意义使用自增链用于唯一标示表行的数据当定义主键约束后该列不能重复且不能为一张表最多只能有一个主键但是可以有多个复合主键主键的指定方式直接在字段名后指定字段名在表定义最后写列名使用表名可以查看的情况表示列是主键主键使用细节不能重复而且不能为一张表最多只能有一个主键但可以是复合主键表示列是主键错误写法复合主键和做成复合主键只有和都相同才不能添加进去主键的指定方式有两种直接在字段名后指定字段名在表定义最后写列名使用表名可以看到的情况非空列上定义了表示插入数据时必须为列提供数据唯一当该列定义了唯一约束该列值不能重复如果没有指定则字段可以有多个一张表可以有多个字段表示列是不可以重复的使用细节如果没有指定则字段可以有多个如果一个列字段是使用效果类似一张表可以有多个表示列是不可以重复的表示不可以重复外键用于定义主表和从表之间的关系外键约束要定义在从表上主表则必须具有主键约束或是约束当定义外键约束后要求外键列数据必须在主表的主键列存在或是为外键这里是给订单表设置一个外键外键是用户表的字段外键约束的格式外键约束的名称从表字段主表名主表字段约束规则创建主表创建从表下面指定外键关系测试数据这里会失败因为号班级不存在可以加入一旦建立主外键关系就不能随意删除了用于强制行数据必须满足的条件目前还不支持只做语法校验不会生效的使用目前还不支持只做语法校验但不会生效这两个数据库会生效测试自增长从开始自动增长的整数添加自增长方式字段字段值字段值值值细节一般来说自增长是和配合使用自增长也可以单独使用但是需要配合一个自增长修饰的字段为整数型的虽然小数也可以但是非常非常少这样使用自增长默认从开爱你新的升始直表名新的开始值如果你添加数据时给自增长字段列指定的有值则以指定的值为准如果指定了自增长一般来说就按照自增长的规则来添加数据自增长创建表自增长索引添加索引可提高查询速率原理类型主键索引主键自动的为主索引唯一索引普通索引全文索引适用于一般情况下不适用自带的全文索引而是使用全文搜索和的索引使用创建索引查询表是否有索引添加索引添加唯一索引添加普通索引方式如果某列的值是不会重复的则优先考虑使用索引否则使用普通索引添加普通索引方式添加主键索引在创建表的时候指定主键建表后添加删除索引删除主键索引修改索引先删除再添加新的索引查询索引方式方式方式方式事务用于保证数据的一致性它由一组相关的语句组成该组的语句要么全部成功要么全部失败事务和锁当执行事务操作时语句会在表上加锁防止其它用户改表的数据这对用户来讲是非常重要的数据库控制台事务的几个重要操作开始一个事务保存点名设置保存点保存点名回退事务回退全部事务提交事务所有的操作生效不能回退事务操作创建表开启事务设置事务保存点执行语句执行语句回退事务回退全部事务提交事务细节如果不开始事务默认情况下操作是自动提交的不能回滚如果开始一个事务你没有创建保存点你可以执行默认就是回退到你事务开始的状态你也可以在这个事务中还没有提交时创建多个保存点比如执行你可以在事务没有提交前选择回退到哪个保存点的事务机制需要的存储引擎还可以使用不好使开始一个事务事务细节如果不开启事务默认情况下操作是自动提交的不能回滚自动提交如果开启一个事务没有创建保存点执行默认回退到事务开始的状态直接回退到事务开始的状态在事务没提交前可以创建多个保存点事务没有提交前可以选择回退到那个保存点存储引擎支持事务不支持开始一个事务隔离级别多个连接开启各自事务操作数据库中数据时数据库系统要负责隔离操作以保证各个连接在获取数据时的准确性如果不考虑隔离性可能会引发如下问题脏读不可重复读幻读脏读当一个事务读取另一个事务尚未提交的修改时产生脏读不可重复读同一查询在同一事务中多次进行由于其他提交事务所做的修改或删除每次返回不同的结果集此时发生不可重复读幻读同一查询在同一事务中多次进行由于其他提交事务所做的插入操作每次返回不同的结果集此时发生幻读事务隔离级别登入查询当前事务的隔离级别把其中一个控制台的隔离级别设置为选择数据库数据库名创建表查看当前会话隔离级别查看系统当前会话级别设置当前会话级别设置系统当前隔离级别设置的级别全局修改修改配置文件在最后加上可选参数有特性原子性原子性是指事务是一个不可分割的工作单位事务中的操作要么都发生要么都不发生一致性事务必须使数据库从一个一致性状态变换到另外一个一致性状态隔离性事务的隔离性是多个用户并发访问数据库时数据库为每一个用户开启的事务不能被其他事务的操作数据所干扰多个并发事务之间要相互隔离持久性持久性是指一个事务一旦被提交它对数据库中数据的改变就是永久性的接下来即使数据库发生故障也不应该对其有任何影响表类型和存储引擎介绍的表类型由存储引擎决定主要包括等数据表主要支持六种类型分别是这六种又分为两类一类是事务安全型比如其余都属于第二类称为非事务安全型和显示当前数据库支持的存储引擎修改存储引擎表名存储引擎特点特点批量插入的速度高低高非常高事务安全支持全文索引支持锁机制表锁行锁表锁行锁存储限制没有有没有树索引支持支持支持哈希索引支持支持集群索引支持数据缓存支持支持索引缓存支持支持支持数据可压缩支持支持空间使用低高非常低内存使用低高中等低支持外键支持不支持事务也不支持外键但其访问速度快对事务完整性没有要求存储引擎提供了具有提交回滚和崩溃恢复能力的事务安全但是比起存储引擎写的处理效率差一些并且会占用更多的磁盘空间以保留数据和索引存储引擎使用存在内存中的内容来创建表每个表只实际对应一个磁盘文件类型的表访问非常得快因为它的数据是放在内存中的并且默认使用索引但是一旦服务关闭表中的数据就会丢失掉表的结构还在显示所有引擎存储引擎支持事务支持外键支持行级锁存储引擎添加速度快不支持外键和事务支持表级锁存储引擎数据存储在内存中关闭服务数据丢失但是表结构仍存在执速度很快没有读写默认支持索引表修改存储引擎选择如果你的应用不需要事务处理的只是基本的操作那么是不二选择速度快如果需要支持事务选择存储引擎就是将数据存储在内存中由于没有磁盘的等待速度极快但由于是内存存储引擎所做的任何修改在服务器重启后都将消失经典用法用户的在线状态视图视图是一个虚拟表其内容由查询定义视图包含列其数据来自对应的基表视图和基表的关系基本使用基本使用视图名语句视图名语句视图名视图名视图名视图的使用创建一个视图只能查询表的和信息创建视图查看视图查看创建视图的指令删除视图细节创建视图后查询数据库文件视图只有一个结构文件形式视图名视图的数据变化会影响到基表基表的数据变化也会影响到视图视图中可以在使用视图特点安全一些数据表有着重要的信息有些字段是保密的不能让用户直接看到这时就可以创建一个视图在这张视图中只保留一部分字段这样用户就可以查询自己需要的字段不能查看保密的字段性能关系数据库的数据常常会分表存储使用外键建立这些表的之间关系这时数据库查询通常会用到连接这样做不但麻烦效率相对也比较低如果建立一个视图将相关的表和字段组合在一起就可以避免使用查询数据灵活如果系统中有一张旧的表这张表由于设计的问题即将被废弃然而很多应用都是基于这张表不易修改这时就可以建立一张视图视图中的数据直接映射到新建的表这样就可以少做很多改动也达到了升级数据表的目的管理中的用户都存储在系统数据库中表中允许登入的地址表示该用户只允许本机登入也可以指定地址登入如用户名密码是通过的函数加密之后的密码操作创建用户同时指定密码用户名允许登入的位置密码删除用户用户名允许登入的位置修改用户密码需要权限修改自己的密码密码修改他人密码需要有修改权限用户名登入位置密码权限给用户授权语法权限列表库对象名用户名登录位置密码说明权限列表多个权限用逗号分开表示赋予该用户在该对象上的所有权限特别说明代表本系统中的所有数据库的所有对象表视图存储过程库表示某个数据库中的所有数据对象表视图存储过程等可以省略也可以写出如果用户存在就是修改该用户的密码如果该用户不存在就是创建该用户回收用户授权权限列表库对象名用户名登入位置权限生效指令细节在创建用户的时候如果不指定则为表示表示所有都有连接权限你也可以这样指定表示用户在的可以登录在删除用户的时候如果不是需要明确指定用户值案例设学校环境如下一个系有若干个专业每个专业一年只招一个班每个班有若干个学生现要建立关于系学生班级的数据库关系模式为班班号专业名系名入学年份人数学生学号姓名年龄班号系系号系名添加数学计算机化学中文经济软件计算机微电子计算机无机化学化学高分子化学化学统计数学数学现代语言数学国际贸易经济国际金融经济张三钱四王玲李飞赵四李可张飞周瑜王亮董庆赵龙李丽完成以下查询功能找出所有姓李的学生李列出所有开设超过个专业的系的名字列出人数大于等于的系的编号和名字先查出各个系有多少个人看成零时表进行与组合查找学校又新增加了一个物理系编号为物理系学生张三退学请更新相关的表分析张三所在班级的人数将张三从学生表删除需要使用事务控制开启事务张三所在班级的人数张三张三提交事务',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-06-10 16:46:12',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.1.0"><link rel="stylesheet" href="/css/prism-shades-of-purple.css" type="text/css"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="/./img/avatar.png"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" href="/undefined/51156.html" title="zbTools"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zhib0.oss-cn-hangzhou.aliyuncs.com/img/zbTools_icon.JPG" alt="zbTools"/><span class="back-menu-item-text">zbTools</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">执笔のNote</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 记录</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=934022020&amp;server=netease"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/null"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/null"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/AnsysWorkbench/" style="font-size: 1.05rem;">AnsysWorkbench<sup>8</sup></a><a href="/tags/HarmonyOS4-0/" style="font-size: 1.05rem;">HarmonyOS4.0<sup>1</sup></a><a href="/tags/Hexo/" style="font-size: 1.05rem;">Hexo<sup>3</sup></a><a href="/tags/Java/" style="font-size: 1.05rem;">Java<sup>37</sup></a><a href="/tags/Solidworks/" style="font-size: 1.05rem;">Solidworks<sup>7</sup></a><a href="/tags/%E4%B8%AA%E4%BA%BA%E6%80%BB%E7%BB%93/" style="font-size: 1.05rem;">个人总结<sup>1</sup></a><a href="/tags/%E5%B7%A5%E4%BD%9C%E6%B5%81/" style="font-size: 1.05rem;">工作流<sup>6</sup></a><a href="/tags/%E5%B7%A5%E8%89%BA/" style="font-size: 1.05rem;">工艺<sup>3</sup></a><a href="/tags/%E6%9C%89%E9%99%90%E5%85%83%E5%88%86%E6%9E%90/" style="font-size: 1.05rem;">有限元分析<sup>17</sup></a><a href="/tags/%E6%9C%BA%E6%A2%B0%E5%88%B6%E5%9B%BE/" style="font-size: 1.05rem;">机械制图<sup>5</sup></a><a href="/tags/%E6%9D%90%E6%96%99/" style="font-size: 1.05rem;">材料<sup>4</sup></a><a href="/tags/%E6%9D%90%E6%96%99%E5%8A%9B%E5%AD%A6/" style="font-size: 1.05rem;">材料力学<sup>1</sup></a><a href="/tags/%E6%A8%A1%E5%85%B7/" style="font-size: 1.05rem;">模具<sup>1</sup></a><a href="/tags/%E8%B5%84%E6%96%99/" style="font-size: 1.05rem;">资料<sup>3</sup></a><a href="/tags/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/" style="font-size: 1.05rem;">软件开发<sup>1</sup></a><a href="/tags/%E9%97%AE%E9%A2%98/" style="font-size: 1.05rem;">问题<sup>3</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/08/"><span class="card-archive-list-date">八月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">七月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/06/"><span class="card-archive-list-date">六月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/05/"><span class="card-archive-list-date">五月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/03/"><span class="card-archive-list-date">三月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/02/"><span class="card-archive-list-date">二月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/01/"><span class="card-archive-list-date">一月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/12/"><span class="card-archive-list-date">十二月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%85%B4%E8%B6%A3%E7%88%B1%E5%A5%BD/" itemprop="url">兴趣爱好</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/Java/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>Java</span></a></span></div></div><h1 class="post-title" itemprop="name headline">java学习笔记（二十四） - MySQL数据库</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2022-06-27T12:11:04.000Z" title="发表于 2022-06-27 20:11:04">2022-06-27</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2024-06-10T08:46:12.214Z" title="更新于 2024-06-10 16:46:12">2024-06-10</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">10.8k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>41分钟</span></span><span class="post-meta-separator"></span><span id="" data-flag-title="java学习笔记（二十四） - MySQL数据库"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="twikoo_visitors" title="访问量"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为浙江"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>浙江</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://zhib0.oss-cn-hangzhou.aliyuncs.com/img/mysql20240610.jpg"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://yigefanren5-2.github.io/undefined/4a1b.html"><header><a class="post-meta-categories" href="/categories/%E5%85%B4%E8%B6%A3%E7%88%B1%E5%A5%BD/" itemprop="url">兴趣爱好</a><a href="/tags/Java/" tabindex="-1" itemprop="url">Java</a><h1 id="CrawlerTitle" itemprop="name headline">java学习笔记（二十四） - MySQL数据库</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">执笔</span><time itemprop="dateCreated datePublished" datetime="2022-06-27T12:11:04.000Z" title="发表于 2022-06-27 20:11:04">2022-06-27</time><time itemprop="dateCreated datePublished" datetime="2024-06-10T08:46:12.214Z" title="更新于 2024-06-10 16:46:12">2024-06-10</time></header><h2 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h2><h3 id="基本指令"><a href="#基本指令" class="headerlink" title="基本指令"></a>基本指令</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">net start mysql <span class="comment">//启动mysql服务</span></span><br><span class="line">net stop mysql <span class="comment">//停止mysql服务</span></span><br><span class="line"><span class="comment">//本机默认端口3306登入</span></span><br><span class="line">mysql -u root -p <span class="comment">//进入mysql管理终端 -u 用户名 -p 密码(此处可不写，回车后再填也可以) </span></span><br><span class="line"><span class="comment">//连接Mysql数据库指令</span></span><br><span class="line">mysql -h 主机ip -P 端口 -u 用户名 -p密码</span><br><span class="line"><span class="comment">//-p密码 不需要待空格</span></span><br><span class="line"><span class="comment">//-p密码，密码可以省略回车后再输入</span></span><br><span class="line"><span class="comment">//-h 主机IP ，默认本机</span></span><br><span class="line"><span class="comment">//-P 端口， 默认3306</span></span><br><span class="line">flush privilesges <span class="comment">//刷新权限</span></span><br></pre></td></tr></table></figure>
<h3 id="数据库三层结构"><a href="#数据库三层结构" class="headerlink" title="数据库三层结构"></a>数据库三层结构</h3><ul>
<li>所谓的安装Mysql数据库，就是在主机安装一个数据库管理系统（DBMS：database manager system），这个管理程序可以管理多个数据库</li>
<li>一个数据库中可以创建多个表，以保存数据（信息）</li>
<li>普通表的本质仍然是文件</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/数据库管理系统、数据库、表间的关系.jpg" alt="数据库管理系统、数据库、表间的关系"></p>
<h3 id="数据库的范式"><a href="#数据库的范式" class="headerlink" title="数据库的范式"></a>数据库的范式</h3><ul>
<li>第一范式：列不可再分</li>
<li>第二范式：一张表只表达一层含义（只描述一件事情）</li>
<li>第三范式：表中的每一列和主键都是直接依赖关系，而不是间接依赖</li>
</ul>
<div class="note info flat"><p>数据库设计的范式和数据库的查询性能很多时候是相悖的，我们需要根据实际的业务情况做一个选择：</p>
<ul>
<li>查询频次不高的情况下，我们更倾向于提高数据库的设计范式，从而提高存储效率</li>
<li>查询频次较高的情形，我们更倾向于牺牲数据库的规范度，降低数据库设计的范式，允许特定的冗余，从而提高查询的性能</li>
</ul>
</div>
<h3 id="存储方式"><a href="#存储方式" class="headerlink" title="存储方式"></a>存储方式</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/数据库存储方式.jpg" alt="数据库存储方式"></p>
<ul>
<li>表的一行称为一条记录，在Java程序中，一行记录往往用对象表示</li>
</ul>
<h3 id="SQL语句的分类"><a href="#SQL语句的分类" class="headerlink" title="SQL语句的分类"></a>SQL语句的分类</h3><ul>
<li>DDL：数据定义语句[create表，库.….]</li>
<li>DML：数据操作语句[增加insert,修改update,删除delete]</li>
<li>DQL：数据查询语句[select ]</li>
<li>DCL：数据控制语句[管理数据库:比如用户权限 grant revoke ]</li>
</ul>
<h3 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a>数据库操作</h3><h4 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/创建数据库.png" alt="创建数据库"></p>
<ul>
<li>CHARACTER SET：指定数据库采用的字符集，<strong>默认utf8</strong></li>
<li>COLLATE：指定数据库字符集的校对规则（通常采用<strong>utf8_bin[区分大小写]</strong>、<strong>utf8_general_ci[不区分大小写]</strong>，<strong>默认是utf8_general_ci</strong>）</li>
<li>规避关键字可以用反引号（`）</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE db01;<span class="comment">//创建db01数据库</span></span><br><span class="line">CCREATE DATABASE `name`;<span class="comment">//使用反引号规避关键字</span></span><br></pre></td></tr></table></figure>
<h4 id="查看、删除数据库"><a href="#查看、删除数据库" class="headerlink" title="查看、删除数据库"></a>查看、删除数据库</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/查看、删除数据库.png" alt="查看删除数据库"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SHOW DATABASES;<span class="comment">//显示数据库</span></span><br><span class="line">SHOW CREATE DATABASE db01;<span class="comment">//显示创建数据库语句</span></span><br><span class="line">DROP DATABASE db01;<span class="comment">//删除数据库</span></span><br></pre></td></tr></table></figure>
<h4 id="备份和恢复数据库"><a href="#备份和恢复数据库" class="headerlink" title="备份和恢复数据库"></a>备份和恢复数据库</h4><h5 id="备份数据库"><a href="#备份数据库" class="headerlink" title="备份数据库"></a>备份数据库</h5><ul>
<li>在dos下执行</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -u 用户名 -p -B 数据库<span class="number">1</span> 数据库<span class="number">2</span> 数据库n &gt; 文件名.sql</span><br><span class="line"><span class="comment">//案例</span></span><br><span class="line">mysqldump -u root -p -B db01 &gt; name.sql;</span><br></pre></td></tr></table></figure>
<h5 id="恢复数据库"><a href="#恢复数据库" class="headerlink" title="恢复数据库"></a>恢复数据库</h5><ul>
<li>进入SQLyog再执行</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Source 文件名.sql</span><br><span class="line"><span class="comment">//案例</span></span><br><span class="line">Source name.sql</span><br></pre></td></tr></table></figure>
<h2 id="表"><a href="#表" class="headerlink" title="表"></a>表</h2><h3 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/创建表.png" alt="创建表"></p>
<h3 id="备份和回复表"><a href="#备份和回复表" class="headerlink" title="备份和回复表"></a>备份和回复表</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//备份数据库的表</span></span><br><span class="line">mysqldump -u 用户名 -p 密码 数据库 表<span class="number">1</span> 表<span class="number">2</span> 表n &gt; d:\\文件名.sql</span><br></pre></td></tr></table></figure>
<h3 id="修改表"><a href="#修改表" class="headerlink" title="修改表"></a>修改表</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/修改表.png" alt="修改表"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//修改表名</span></span><br><span class="line">Rename table 表名 to 新表名;</span><br><span class="line"><span class="comment">//修改表字符集</span></span><br><span class="line">alter table 表名 character set 字符集;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 修改job列，使其长度为60</span></span><br><span class="line">ALTER TABLE emp </span><br><span class="line">	MODIFY job <span class="title function_">VARCHAR</span><span class="params">(<span class="number">60</span>)</span> NOT NULL DEFAULT <span class="string">&#x27;&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h3 id="表复制"><a href="#表复制" class="headerlink" title="表复制"></a>表复制</h3><ul>
<li>自我复制数据（蠕虫复制）</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">-- 表复制(蠕虫复制)</span><br><span class="line">CREATE TABLE <span class="title function_">my_tab01</span></span><br><span class="line">	<span class="params">(id INT,</span></span><br><span class="line"><span class="params">	`name` VARCHAR(<span class="number">32</span>)</span>,</span><br><span class="line">	sal DOUBLE,</span><br><span class="line">	job <span class="title function_">VARCHAR</span><span class="params">(<span class="number">32</span>)</span>,</span><br><span class="line">	deptno INT);</span><br><span class="line"></span><br><span class="line">DESC my_tab01;</span><br><span class="line">SELECT * FROM my_tab01;</span><br><span class="line"></span><br><span class="line">-- 自我复制</span><br><span class="line">-- <span class="number">1.</span> 把emp表复制到my_tab01表</span><br><span class="line">INSERT INTO <span class="title function_">my_tab01</span></span><br><span class="line">	<span class="params">(id,`name`,sal,job,deptno)</span></span><br><span class="line">	SELECT empno, ename, sal, job, deptno</span><br><span class="line">		FROM emp;</span><br><span class="line">SELECT * FROM emp;</span><br><span class="line">-- 自我复制  每执行一次翻倍</span><br><span class="line">INSERT INTO my_tab01</span><br><span class="line">	SELECT * FROM my_tab01;</span><br><span class="line"></span><br><span class="line">-- 删除一张重复的表</span><br><span class="line">-- <span class="number">1.</span> 先创建一张my_tab02</span><br><span class="line">-- <span class="number">2.</span> 让my_ tab02 有重复的记录</span><br><span class="line">CREATE TABLE my_tab02 LIKE emp;-- 把emp表的结构(列) 复制到my_tab02</span><br><span class="line"></span><br><span class="line">DESC my_tab02;</span><br><span class="line"></span><br><span class="line">INSERT INTO my_tab02</span><br><span class="line">	SELECT * FROM emp;</span><br><span class="line">SELECT * FROM my_tab02;</span><br><span class="line"></span><br><span class="line">-- <span class="number">3.</span> 考虑去重</span><br><span class="line">-- (<span class="number">1</span>) 创建一个新的临时空表my_tem,该表结构与my_tab02一致</span><br><span class="line">CREATE TABLE my_tem LIKE my_tab02;</span><br><span class="line">-- (<span class="number">2</span>) 将my_tem 通过distinct 关键字处理后把记录复制到my_tem表</span><br><span class="line">INSERT INTO my_tem</span><br><span class="line">	SELECT DISTINCT * FROM my_tab02;</span><br><span class="line">-- (<span class="number">3</span>) 清除my_tab02的所有记录</span><br><span class="line">DELETE FROM my_tab02;</span><br><span class="line">-- (<span class="number">4</span>) 把my_tem表的记录复制到my_tab02</span><br><span class="line">INSERT INTO my_tab02</span><br><span class="line">	SELECT * FROM my_tem;</span><br><span class="line">-- (<span class="number">5</span>) drop 删除掉my_tem表</span><br><span class="line">DROP TABLE my_tem;</span><br><span class="line">-- </span><br><span class="line">SELECT * FROM my_tem</span><br></pre></td></tr></table></figure>
<h3 id="显示表结构"><a href="#显示表结构" class="headerlink" title="显示表结构"></a>显示表结构</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//显示表结构 可以查看表所有的列</span></span><br><span class="line">DESC 表名 </span><br><span class="line"><span class="comment">//案例</span></span><br><span class="line">DESC emp;</span><br></pre></td></tr></table></figure>
<h2 id="Mysql常用的数据类型（列类型）"><a href="#Mysql常用的数据类型（列类型）" class="headerlink" title="Mysql常用的数据类型（列类型）"></a>Mysql常用的数据类型（列类型）</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/Mysql列类型.png" alt="Mysql列类型"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/Mysql常用数据类型详情.png" alt></p>
<h3 id="整数类型"><a href="#整数类型" class="headerlink" title="整数类型"></a>整数类型</h3><ul>
<li>在满足需求的情况下，尽量选者占用空间小的数据类型</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义无符号的整数</span></span><br><span class="line">create table <span class="title function_">t1</span> <span class="params">(id tinyint)</span>;<span class="comment">//默认是有符号的</span></span><br><span class="line">create table <span class="title function_">t1</span> <span class="params">(id tinyint unsigned)</span>;<span class="comment">//无符号定义</span></span><br></pre></td></tr></table></figure>
<h3 id="位类型"><a href="#位类型" class="headerlink" title="位类型"></a>位类型</h3><ul>
<li>bit字段显示时，按照位的方式显示</li>
<li>查询的时候仍然可以使用添加的数值</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//基本使用</span><br><span class="line">create table t2 (num bit(M));//M范围 1~64</span><br></pre></td></tr></table></figure>
<h3 id="小数"><a href="#小数" class="headerlink" title="小数"></a>小数</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">FLOAT/DOUBLE[UNSIGNED]<span class="comment">//float 单精度，double 双精度</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">可以支持更加精确的小数位，M是小数位数(精度)的总数,D是小数点(标度)后面的位数</span></span><br><span class="line"><span class="comment">如果D是0，则没有小数点 </span></span><br><span class="line"><span class="comment">M最大65，D最大是30；如果D被省略，默认是0，如果M被省略，默认是10</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">DECIMAL[M,D][UNSIGNED]</span><br></pre></td></tr></table></figure>
<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CHAR(size)<span class="comment">//固定长度字符串，最大255字符 </span></span><br><span class="line">VARCHAR(size)<span class="comment">//可变长度字符 最大65532字节 [utf8编码最大21844字符 其中1-3字节用于记录大小]</span></span><br></pre></td></tr></table></figure>
<h2 id="数据库crud"><a href="#数据库crud" class="headerlink" title="数据库crud"></a>数据库crud</h2><h3 id="insert-添加数据"><a href="#insert-添加数据" class="headerlink" title="insert 添加数据"></a>insert 添加数据</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/insert添加数据.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//案例</span></span><br><span class="line">insert into goods <span class="title function_">values</span><span class="params">(<span class="number">1</span>,<span class="number">200</span>)</span>;</span><br><span class="line"><span class="comment">//细节</span></span><br><span class="line"><span class="comment">//(1) 插入的数据应与字段的数据类型相同。比如把&#x27;abc&#x27;添加到int类型会错误</span></span><br><span class="line"><span class="comment">//(2) 数据的长度应在列的规定范围内，例如:不能将一个长度为80的字符串加入到长度为40的列中。</span></span><br><span class="line"><span class="comment">//(3) 在values中列出的数据位置必须与被加入的列的排列位置相对应。</span></span><br><span class="line"><span class="comment">//(4) 字符和日期型数据应包含在单引号中。</span></span><br><span class="line"><span class="comment">//(5) 列可以插入空值[前提是该字段允许为空]，insert into table value(null)</span></span><br><span class="line"><span class="comment">//(6) insert into tab name(列名..) values (),(),() 形式添加多条记录</span></span><br><span class="line"><span class="comment">//(7) 如果是给表中的所有字段添加数据，可以不写前面的字段名称</span></span><br><span class="line"><span class="comment">//(8) 默认值的使用，当不给某个字段值时，如果有默认值就会添加，否则报错</span></span><br></pre></td></tr></table></figure>
<h3 id="update-修改数据"><a href="#update-修改数据" class="headerlink" title="update 修改数据"></a>update 修改数据</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/update修改数据.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//案例</span></span><br><span class="line">update goods <span class="type">set</span> <span class="variable">sal</span> <span class="operator">=</span> <span class="number">2</span> <span class="type">where</span> <span class="variable">id</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="comment">//细节</span></span><br><span class="line"><span class="comment">//(1) UPDATE语法可以用新值更新原有表行中的各列。</span></span><br><span class="line"><span class="comment">//(2) SET子句指示要修改哪些列和要给予哪些值。</span></span><br><span class="line"><span class="comment">//(3) WHERE子句指定应更新哪些行。如没有WHERE子句,则更新所有的行。</span></span><br><span class="line"><span class="comment">//(4)如果需要修改多个字段,可以通过set字段1=值1,字段2=值2.….</span></span><br></pre></td></tr></table></figure>
<h3 id="delete-删除数据"><a href="#delete-删除数据" class="headerlink" title="delete 删除数据"></a>delete 删除数据</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/delete删除数据.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//案例</span></span><br><span class="line">delete from goods <span class="type">where</span> <span class="variable">id</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="comment">//细节</span></span><br><span class="line"><span class="comment">//(1) 如果不使用where子句，将删除表中所有数据。</span></span><br><span class="line"><span class="comment">//(2) Delete语句不能删除某一列的值(可使用update 设为null或者&quot;&quot;)使用delete语句仅删除记录，不删除表本身。</span></span><br><span class="line"><span class="comment">//(3) 如要删除表，使用drop语句。drop table表名;</span></span><br></pre></td></tr></table></figure>
<h3 id="select-查询数据"><a href="#select-查询数据" class="headerlink" title="select 查询数据"></a>select 查询数据</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/select查询数据.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//案例</span></span><br><span class="line">select * from goods;</span><br><span class="line"><span class="comment">//细节</span></span><br><span class="line"><span class="comment">//(1) Select 指定查询哪些列的数据。</span></span><br><span class="line"><span class="comment">//(2) column指定列名。</span></span><br><span class="line"><span class="comment">//(3) *号代表查询所有列。</span></span><br><span class="line"><span class="comment">//(4) From指定查询哪张表。</span></span><br><span class="line"><span class="comment">//(5) DISTINCT可选,指显示结果时,是否去掉重复数据</span></span><br></pre></td></tr></table></figure>
<h4 id="使用表达式对查询的列进行运算"><a href="#使用表达式对查询的列进行运算" class="headerlink" title="使用表达式对查询的列进行运算"></a>使用表达式对查询的列进行运算</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/select查询运算.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select name,(math + chinese + english) from students;</span><br></pre></td></tr></table></figure>
<h4 id="给列取别名"><a href="#给列取别名" class="headerlink" title="给列取别名"></a>给列取别名</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/select给列取别名.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select name as <span class="string">&#x27;名字&#x27;</span> from students;</span><br></pre></td></tr></table></figure>
<h4 id="where-选择查询"><a href="#where-选择查询" class="headerlink" title="where 选择查询"></a>where 选择查询</h4><div class="table-container">
<table>
<thead>
<tr>
<th>比较运算符</th>
<th>&gt;  &lt;  &lt;=  &gt;=  =  &lt;&gt;  !=</th>
<th>大于、小于、大于（小于）等于、不等于</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td><strong>between…and…</strong></td>
<td><strong>显示某一区间的值</strong></td>
</tr>
<tr>
<td></td>
<td><strong>in(set)</strong></td>
<td><strong>显示在in列表中的值，in(100,200)</strong></td>
</tr>
<tr>
<td></td>
<td><strong>like ‘张pattern’  not like</strong></td>
<td><strong>模糊查询</strong></td>
</tr>
<tr>
<td></td>
<td><strong>is null</strong></td>
<td><strong>判断是否为空</strong></td>
</tr>
<tr>
<td><strong>逻辑运算符</strong></td>
<td><strong>and</strong></td>
<td><strong>多个条件同时成立</strong></td>
</tr>
<tr>
<td></td>
<td><strong>or</strong></td>
<td><strong>多个条件任一条件成立</strong></td>
</tr>
<tr>
<td></td>
<td><strong>not</strong></td>
<td><strong>不成立</strong></td>
</tr>
</tbody>
</table>
</div>
<h4 id="order-by-排序查询"><a href="#order-by-排序查询" class="headerlink" title="order by 排序查询"></a>order by 排序查询</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/orderby排序.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//案例</span></span><br><span class="line">SELECT * FROM emp </span><br><span class="line">	ORDER BY sal;</span><br><span class="line"><span class="comment">//细节</span></span><br><span class="line"><span class="comment">//(1) Order by 指定排序的列，排序的列既可以是表中的列名，也可以是select语句后指定的列名。</span></span><br><span class="line"><span class="comment">//(2) Asc升序[默认]、Desc降序</span></span><br><span class="line"><span class="comment">//(3) ORDER BY子句应位于SELECT语句的结尾。</span></span><br></pre></td></tr></table></figure>
<h4 id="count-合计函数"><a href="#count-合计函数" class="headerlink" title="count 合计函数"></a>count 合计函数</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/count合计函数.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//案例</span></span><br><span class="line">SELECT <span class="title function_">COUNT</span><span class="params">(*)</span> FROM student;</span><br><span class="line"><span class="comment">//细节</span></span><br><span class="line"><span class="comment">//(1) 如果该值是null就不会统计</span></span><br><span class="line"><span class="comment">//(2) count返回行的总数</span></span><br><span class="line"><span class="comment">// count(*) 和 count(列) 的区别</span></span><br><span class="line"><span class="comment">// count(*)  返回满足条件的记录的行数</span></span><br><span class="line"><span class="comment">// count(列)：统计满足条件的某列有多少 但是会排除 为null的情况</span></span><br></pre></td></tr></table></figure>
<h4 id="sum-求和"><a href="#sum-求和" class="headerlink" title="sum 求和"></a>sum 求和</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/sum求和.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 统计一个班级语文、英语、数学各科的总成绩</span></span><br><span class="line">SELECT <span class="title function_">SUM</span><span class="params">(math)</span> AS 数学总分, SUM(english) AS 英语总分, SUM(chinese) AS 语文总分 FROM student;</span><br></pre></td></tr></table></figure>
<h4 id="AVG-平均值"><a href="#AVG-平均值" class="headerlink" title="AVG 平均值"></a>AVG 平均值</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/AVG平均值.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 求一个班级总分平均分</span></span><br><span class="line">SELECT <span class="title function_">AVG</span><span class="params">(chinese + english + math)</span> FROM student;</span><br></pre></td></tr></table></figure>
<h4 id="Max-Min-最大-最小值"><a href="#Max-Min-最大-最小值" class="headerlink" title="Max/Min 最大/最小值"></a>Max/Min 最大/最小值</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Max Min 函数的使用</span></span><br><span class="line"><span class="comment">// 求班级最高分 和最低分</span></span><br><span class="line">SELECT <span class="title function_">MAX</span><span class="params">(chinese + english + math)</span>, MIN(chinese + english + math) FROM student;</span><br></pre></td></tr></table></figure>
<h4 id="group-by-分组"><a href="#group-by-分组" class="headerlink" title="group by 分组"></a>group by 分组</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/groupby分组.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 显示平均工资低于2000的部门号和它的平均工资//别名 </span></span><br><span class="line"><span class="comment">// 1. 显示均工资低于2000的部门号</span></span><br><span class="line">SELECT <span class="title function_">AVG</span><span class="params">(sal)</span>,deptno FROM emp GROUP BY deptno;</span><br></pre></td></tr></table></figure>
<ul>
<li>使用having子句对分组后的结果进行过滤</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/having过滤.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 2. 显示平均工资低于2000的部门号和它的平均工资</span></span><br><span class="line">SELECT <span class="title function_">AVG</span><span class="params">(sal)</span>,deptno FROM emp GROUP BY deptno HAVING <span class="title function_">AVG</span><span class="params">(sal)</span> &lt; <span class="number">2000</span>;</span><br></pre></td></tr></table></figure>
<h4 id="字符串相关函数"><a href="#字符串相关函数" class="headerlink" title="字符串相关函数"></a>字符串相关函数</h4><div class="table-container">
<table>
<thead>
<tr>
<th>CHARSET(str)</th>
<th>返回字串字符集</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>CONCAT(string2 [,….])</strong></td>
<td><strong>连接字符串</strong></td>
</tr>
<tr>
<td><strong>INSERT(string , substring)</strong></td>
<td><strong>返回substring在string中出现的位置，没有就返回0</strong></td>
</tr>
<tr>
<td><strong>UCASE(string2)</strong></td>
<td><strong>转换成大写</strong></td>
</tr>
<tr>
<td><strong>LCASE(string2)</strong></td>
<td><strong>转换成小写</strong></td>
</tr>
<tr>
<td><strong>LEFT(string2, length)</strong></td>
<td><strong>从string2中的左边起取length个字符</strong></td>
</tr>
<tr>
<td><strong>LENGTH(string)</strong></td>
<td><strong>string长度[按照字节]</strong></td>
</tr>
<tr>
<td><strong>REPLACE(str , search_str, replace_str)</strong></td>
<td><strong>在str中用replace_str替换search_str</strong></td>
</tr>
<tr>
<td><strong>STRCMP(string1, string2)</strong></td>
<td><strong>逐字符比较两个字符串</strong></td>
</tr>
<tr>
<td><strong>SUBSTRING(str, position [,length])</strong></td>
<td><strong>从str的position开始[从1开始计算], 取length个字符</strong></td>
</tr>
<tr>
<td><strong>LTRIM(string2)RTRIM(string2)trim</strong></td>
<td><strong>去除前端空格或后端空格</strong></td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">-- 字符串相关的函数的使用 </span><br><span class="line">-- CHARSET(str) 返回字串字符集</span><br><span class="line">SELECT <span class="title function_">CHARSET</span><span class="params">(ename)</span> FROM emp;</span><br><span class="line">-- CONCAT (string2 [,....]) 连接子串，将多个列拼接成一列</span><br><span class="line">SELECT <span class="title function_">CONCAT</span> <span class="params">(ename, <span class="string">&#x27; 工作是 &#x27;</span>, job)</span> FROM emp;</span><br><span class="line"></span><br><span class="line">-- INSTR(string, substring)  返回substring 在 string 中出现的位置, 没有返回<span class="number">0</span></span><br><span class="line">-- dual 亚元表 系统表 可以作为测试表使用</span><br><span class="line">SELECT <span class="title function_">INSTR</span> <span class="params">(<span class="string">&#x27;zhibi&#x27;</span>, <span class="string">&#x27;bi&#x27;</span>)</span> FROM DUAL;</span><br><span class="line"></span><br><span class="line">-- UCASE(string2)  转换成大写</span><br><span class="line">SELECT <span class="title function_">UCASE</span><span class="params">(ename)</span> FROM emp;</span><br><span class="line"></span><br><span class="line">-- LCASE(string2) 转换成小写</span><br><span class="line">SELECT <span class="title function_">LCASE</span><span class="params">(ename)</span> FROM emp;</span><br><span class="line">-- LEFT(string2, length)  从string2中的左边起取length个字符</span><br><span class="line">-- RIGHT(string2, length)  从string2中的右边起取length个字符</span><br><span class="line">SELECT <span class="title function_">LEFT</span><span class="params">(ename, <span class="number">2</span>)</span> FROM emp;</span><br><span class="line"></span><br><span class="line">-- LENGTH (string) string 长度[按照字节]</span><br><span class="line">SELECT <span class="title function_">LENGTH</span> <span class="params">(ename)</span> FROM emp;</span><br><span class="line">-- REPLACE(str, search str, replacr str) 在str中 用 replace str替换 search str</span><br><span class="line">SELECT ename, REPLACE(job, <span class="string">&#x27;MANAGER&#x27;</span>,<span class="string">&#x27;经理&#x27;</span>) FROM emp;</span><br><span class="line"></span><br><span class="line">-- STRCMP(string1, string2) 逐字符比较量字串大小</span><br><span class="line">SELECT <span class="title function_">STRCMP</span><span class="params">(<span class="string">&#x27;ZB&#x27;</span>,<span class="string">&#x27;ZB&#x27;</span>)</span> FROM DUAL;</span><br><span class="line"></span><br><span class="line">-- SUBSTRING(str, position [, length]) 从str的position开始[从<span class="number">1</span>开始计算]</span><br><span class="line">SELECT <span class="title function_">SUBSTRING</span><span class="params">(ename, <span class="number">1</span>, <span class="number">2</span>)</span> FROM emp;</span><br><span class="line">-- LTRIM(string2) RTRIM(string2) trim 去除前端空格或后端空格</span><br><span class="line">SELECT <span class="title function_">LTRIM</span><span class="params">(<span class="string">&#x27;     执笔&#x27;</span>)</span> FROM DUAL;</span><br><span class="line">SELECT <span class="title function_">LTRIM</span><span class="params">(<span class="string">&#x27;执笔     &#x27;</span>)</span> FROM DUAL;</span><br><span class="line">SELECT <span class="title function_">TRIM</span><span class="params">(<span class="string">&#x27;     执笔     &#x27;</span>)</span> FROM DUAL;</span><br><span class="line"></span><br><span class="line">-- 以首字母小写的方式显示所有emp员工的姓名</span><br><span class="line">-- <span class="number">1.</span> 首字母小写</span><br><span class="line">-- <span class="number">2.</span> 获取除首字母的所有字母</span><br><span class="line">-- <span class="number">3.</span> 拼接 </span><br><span class="line">SELECT <span class="title function_">CONCAT</span> <span class="params">(LCASE(LEFT(ename,<span class="number">1</span>)</span>), SUBSTRING(ename, <span class="number">2</span>)) FROM emp;</span><br><span class="line"></span><br><span class="line">-- 第二种方式</span><br><span class="line">-- <span class="number">1.</span> 获取首字母小写</span><br><span class="line">SELECT <span class="title function_">LCASE</span><span class="params">(LEFT(ename,<span class="number">1</span>)</span>) FROM emp;</span><br><span class="line">-- <span class="number">2.</span> 替换第一个字母</span><br><span class="line">SELECT <span class="title function_">REPLACE</span><span class="params">(ename,LEFT(ename,<span class="number">1</span>)</span>,LCASE(LEFT(ename,<span class="number">1</span>))) FROM emp;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="数学相关函数"><a href="#数学相关函数" class="headerlink" title="数学相关函数"></a>数学相关函数</h4><div class="table-container">
<table>
<thead>
<tr>
<th>ABS(num)</th>
<th>绝对值</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>BIN(decimal_number)</strong></td>
<td><strong>十进制转二进制</strong></td>
</tr>
<tr>
<td><strong>CEILING(number2)</strong></td>
<td><strong>向上取整，得到比num2大的最小整数</strong></td>
</tr>
<tr>
<td><strong>CONV(number2, from_base, to_base)</strong></td>
<td><strong>进制转换</strong></td>
</tr>
<tr>
<td><strong>FLOOR(number2)</strong></td>
<td><strong>向下取整，得到比num2小的最大整数</strong></td>
</tr>
<tr>
<td><strong>FORMAT(number, decimal_place)</strong></td>
<td><strong>保留小数位数</strong></td>
</tr>
<tr>
<td><strong>HEX(DecimalNumber)</strong></td>
<td><strong>转十六进制</strong></td>
</tr>
<tr>
<td><strong>LEAST(number, number2[,….])</strong></td>
<td><strong>求最小值</strong></td>
</tr>
<tr>
<td><strong>MOD(numberator, denominator)</strong></td>
<td><strong>求余</strong></td>
</tr>
<tr>
<td><strong>RAND([seed])</strong></td>
<td><strong>返回一个随机浮点值v，范围0≤v≤1.0**</strong>；诺已指定一个整数N，则它被用作种子值，用来产生重复序列**</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">-- 数学相关函数</span><br><span class="line">--ABS (num)绝对值</span><br><span class="line">SELECT <span class="title function_">ABS</span> <span class="params">(-<span class="number">10</span>)</span>FROM DUAL;</span><br><span class="line"></span><br><span class="line">-- BIN(decimal number ) 十进制转二进制</span><br><span class="line">SELECT <span class="title function_">BIN</span><span class="params">(<span class="number">10</span>)</span> FROM DUAL;</span><br><span class="line"></span><br><span class="line">-- CEILING (number2 )向上取整，得到比num2大的最小整数</span><br><span class="line">SELECT <span class="title function_">CEILING</span> <span class="params">(-<span class="number">1.1</span>)</span> FROM DUAL;</span><br><span class="line"></span><br><span class="line">-- CONV (number2 ,from_base , to_base)进制转换 conv 全称 convert转换</span><br><span class="line">-- <span class="number">8</span> 是十进制数，转换为<span class="number">2</span>进制输出</span><br><span class="line">SELECT <span class="title function_">CONV</span> <span class="params">(<span class="number">8</span> , <span class="number">10</span>, <span class="number">2</span>)</span> FROM DUAL;</span><br><span class="line"></span><br><span class="line">-- FLOOR (number2 )向下取整,得到比 num2小的最大整数</span><br><span class="line">SELECT <span class="title function_">FLOOR</span><span class="params">(<span class="number">1.1</span>)</span> FROM DUAL;</span><br><span class="line"></span><br><span class="line">-- FORMAT(number ,decimal places )保留小数位数(四舍五入)</span><br><span class="line">SELECT <span class="title function_">FORMAT</span><span class="params">(<span class="number">12.12354668</span>,<span class="number">2</span>)</span> FROM DUAL;</span><br><span class="line"></span><br><span class="line">-- HEX(DecimalNumber )转十六进制</span><br><span class="line"></span><br><span class="line">-- LEAST (number , number2[ ,..])求最小值</span><br><span class="line">SELECT <span class="title function_">LEAST</span><span class="params">(<span class="number">1</span>,<span class="number">2</span>,-<span class="number">10</span>,<span class="number">8</span>)</span> FROM DUAL;</span><br><span class="line"></span><br><span class="line">-- MOD(numerator ,denominator )求余</span><br><span class="line">SELECT <span class="title function_">MOD</span><span class="params">(<span class="number">10</span>, <span class="number">3</span>)</span> FROM DUAL;</span><br><span class="line"></span><br><span class="line">-- RAND ( [seed]) RAND ( [seed])其范围为<span class="number">0</span> ≤ v ≤ <span class="number">1.0</span> 随机数</span><br><span class="line">-- 会变的随机数 rand()</span><br><span class="line">SELECT <span class="title function_">RAND</span><span class="params">()</span> FROM DUAL;</span><br><span class="line">-- 一旦执行就不变化的随机数 rand(seed) seed不变 随机数不变化</span><br><span class="line">SELECT <span class="title function_">RAND</span><span class="params">(<span class="number">6</span>)</span> FROM DUAL;</span><br></pre></td></tr></table></figure>
<h4 id="时间日期相关函数"><a href="#时间日期相关函数" class="headerlink" title="时间日期相关函数"></a>时间日期相关函数</h4><div class="table-container">
<table>
<thead>
<tr>
<th>CURRENT_DATE()</th>
<th>当前时间</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>CURRENT_TIME()</strong></td>
<td><strong>当前日期</strong></td>
</tr>
<tr>
<td><strong>CURRENT_TIMESTAMP()</strong></td>
<td><strong>当前时间戳</strong></td>
</tr>
<tr>
<td><strong>DATE(datetime)</strong></td>
<td><strong>返回datetime的日期部分</strong></td>
</tr>
<tr>
<td><strong>DATE_ADD(date2, INTERVAL d_value d_type)</strong></td>
<td><strong>在data2中加上日期或时间</strong></td>
</tr>
<tr>
<td><strong>DATE_SUB(date2, INTERVAL d_value d_type)</strong></td>
<td><strong>在data2中减去日期或时间</strong></td>
</tr>
<tr>
<td><strong>DATEDIFF(date1, date2)</strong></td>
<td><strong>两个日期时间差(结果是多少天)</strong></td>
</tr>
<tr>
<td><strong>TIMEDIFF(date1, date2)</strong></td>
<td><strong>两个时间差(多少小时多少分钟多少秒)</strong></td>
</tr>
<tr>
<td><strong>NOW()</strong></td>
<td><strong>当前时间</strong></td>
</tr>
<tr>
<td><strong>YEAR、Month、DATE(datetime)、FROM_UNIXTIME()</strong></td>
<td><strong>年月日</strong></td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">-- 日期时间相关函数的使用</span><br><span class="line">-- CURRENT_DATE () 当前日期</span><br><span class="line">SELECT <span class="title function_">CURRENT_DATE</span><span class="params">()</span> FROM DUAL;</span><br><span class="line">-- CURRENT_TIME () 当前时间</span><br><span class="line">SELECT <span class="title function_">CURRENT_TIME</span><span class="params">()</span> FROM DUAL;</span><br><span class="line">-- CURRENT_TIMESTAMP () 当前时间戳</span><br><span class="line">SELECT <span class="title function_">CURRENT_TIMESTAMP</span><span class="params">()</span> FROM DUAL;</span><br><span class="line"></span><br><span class="line">-- 创建一张存放信息的表</span><br><span class="line">CREATE TABLE <span class="title function_">mes</span><span class="params">(</span></span><br><span class="line"><span class="params">	id INT,</span></span><br><span class="line"><span class="params">	content VARCHAR(<span class="number">30</span>)</span>,</span><br><span class="line">	send_time DATETIME);</span><br><span class="line"></span><br><span class="line">INSERT INTO mes </span><br><span class="line">	<span class="title function_">VALUES</span><span class="params">(<span class="number">1</span>, <span class="string">&#x27;新闻联播&#x27;</span>, CURRENT_TIMESTAMP()</span>);</span><br><span class="line">INSERT INTO mes </span><br><span class="line">	<span class="title function_">VALUES</span><span class="params">(<span class="number">2</span>, <span class="string">&#x27;浙江新闻&#x27;</span>, NOW()</span>);</span><br><span class="line">INSERT INTO mes </span><br><span class="line">	<span class="title function_">VALUES</span><span class="params">(<span class="number">3</span>, <span class="string">&#x27;广州新闻&#x27;</span>, NOW()</span>);</span><br><span class="line">	</span><br><span class="line">SELECT * FROM mes;</span><br><span class="line">SELECT <span class="title function_">NOW</span><span class="params">()</span> FROM DUAL;</span><br><span class="line"></span><br><span class="line">-- 上应用实例</span><br><span class="line">-- 显示所有新闻信息，发布日期只显示日期，不用显示时间.</span><br><span class="line">SELECT id, content,DATE(send_time)</span><br><span class="line">	FROM mes;</span><br><span class="line">-- 请查询在<span class="number">10</span>分钟内发布的帖子</span><br><span class="line">SELECT * </span><br><span class="line">	FROM mes</span><br><span class="line">	WHERE <span class="title function_">DATE_ADD</span><span class="params">(send_time, INTERVAL <span class="number">10</span> MINUTE)</span> &gt;= NOW();</span><br><span class="line">SELECT * </span><br><span class="line">	FROM mes</span><br><span class="line">	WHERE send_time &gt;= DATE_SUB(NOW(), INTERVAL <span class="number">10</span> MINUTE);	</span><br><span class="line"></span><br><span class="line">-- 请在mysql的sql语句中求出 <span class="number">2011</span>-<span class="number">11</span>-<span class="number">11</span>和<span class="number">1990</span>-<span class="number">1</span>-<span class="number">1</span>相差多少天</span><br><span class="line">SELECT <span class="title function_">DATEDIFF</span><span class="params">(<span class="string">&#x27;2011-11-11&#x27;</span>,<span class="string">&#x27;1990-01-01&#x27;</span>)</span> FROM DUAL;</span><br><span class="line">-- 请用mysgl 的sql语句求出你活了多少天?[练习]</span><br><span class="line">SELECT <span class="title function_">DATEDIFF</span><span class="params">(NOW()</span>,<span class="string">&#x27;1998-06-05&#x27;</span>) FROM DUAL;</span><br><span class="line">-- 如果你能活<span class="number">80</span>岁，求出你还能活多少天.[练习]</span><br><span class="line">-- 先求出活<span class="number">80</span>岁时的日期</span><br><span class="line">SELECT <span class="title function_">DATE_ADD</span><span class="params">(<span class="string">&#x27;1998-06-05&#x27;</span>, INTERVAL <span class="number">80</span> YEAR)</span> FROM DUAL;</span><br><span class="line">-- 计算还能活多少天</span><br><span class="line">SELECT <span class="title function_">DATEDIFF</span><span class="params">(DATE_ADD(<span class="string">&#x27;1998-06-05&#x27;</span>, INTERVAL <span class="number">80</span> YEAR)</span>,NOW()) FROM DUAL;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- YEAR|MONTH|DAY| DATE(datetime)</span><br><span class="line">SELECT <span class="title function_">YEAR</span><span class="params">(NOW()</span>) FROM DUAL;</span><br><span class="line">SELECT <span class="title function_">MONTH</span><span class="params">(NOW()</span>) FROM DUAL;</span><br><span class="line">SELECT <span class="title function_">DAY</span><span class="params">(NOW()</span>) FROM DUAL;</span><br><span class="line">SELECT <span class="title function_">MONTH</span><span class="params">(<span class="string">&#x27;2022-6-17&#x27;</span>)</span> FROM DUAL;</span><br><span class="line"></span><br><span class="line">-- unix_timestamp()  返回的是<span class="number">1970</span>-<span class="number">1</span>-<span class="number">1</span> 到现在的秒数</span><br><span class="line">SELECT <span class="title function_">UNIX_TIMESTAMP</span><span class="params">()</span> FROM DUAL;</span><br><span class="line"></span><br><span class="line">-- FROM_UNIXTIME() 可以把unix_timestamp 秒数 转成指定格式的日期</span><br><span class="line">-- %Y-%m-%d %H:%i:%s 固顶格式 表示年月日时分秒</span><br><span class="line">-- 意义：在开发中，存放一个整数，然后表示时间，通过FROM_UNIXTIME转换</span><br><span class="line">SELECT <span class="title function_">FROM_UNIXTIME</span><span class="params">(UNIX_TIMESTAMP()</span>, <span class="string">&#x27;%Y-%m-%d %H:%i:%s&#x27;</span>) FROM DUAL;</span><br></pre></td></tr></table></figure>
<h4 id="加密和系统函数"><a href="#加密和系统函数" class="headerlink" title="加密和系统函数"></a>加密和系统函数</h4><div class="table-container">
<table>
<thead>
<tr>
<th>USER()</th>
<th>查询用户</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>DATABASE()</strong></td>
<td><strong>数据库名称</strong></td>
</tr>
<tr>
<td><strong>MD5(str)</strong></td>
<td><strong>为字符串算出一个MD5 32位的字符串, (用户密码)加密</strong></td>
</tr>
<tr>
<td><strong>PASSWORD(str)</strong></td>
<td><strong>从原文密码str计算并返回密码字符串，通常用于对mysql数据库的用户密码加密</strong></td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">-- 加密和系统函数使用</span><br><span class="line"></span><br><span class="line">-- USER() 查询用户</span><br><span class="line">-- 可以查看登入到mysql的有哪些用户，以及登入的IP</span><br><span class="line">SELECT <span class="title function_">USER</span><span class="params">()</span> FROM DUAL;-- 用户<span class="meta">@IP</span>地址</span><br><span class="line">-- DATABASE() 查询当前使用数据库的名称</span><br><span class="line">SELECT <span class="title function_">DATABASE</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">-- MD5(str)  为字符串算出一个MD5 <span class="number">32</span>的字符串 常用(用户密码加密)</span><br><span class="line">-- root 密码是 <span class="number">123456</span>--&gt; 加密md5 -&gt; 在数据库中存放的加密后的密码</span><br><span class="line">SELECT <span class="title function_">MD5</span><span class="params">(<span class="string">&#x27;123456&#x27;</span>)</span> FROM DUAL;</span><br><span class="line">SELECT <span class="title function_">LENGTH</span><span class="params">(MD5(<span class="string">&#x27;123456&#x27;</span>)</span>) FROM DUAL;</span><br><span class="line"></span><br><span class="line">-- 演示用户表 存放密码是md5</span><br><span class="line">CREATE TABLE <span class="title function_">zb_user</span></span><br><span class="line">	<span class="params">(id INT,</span></span><br><span class="line"><span class="params">	`name` VARCHAR(<span class="number">32</span>)</span> NOT NULL DEFAULT <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">	psw <span class="title function_">CHAR</span><span class="params">(<span class="number">32</span>)</span> NOT NULL DEFAULT <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">INSERT INTO zb_user <span class="title function_">VALUES</span><span class="params">(<span class="number">1</span>,<span class="string">&#x27;执笔&#x27;</span>, MD5(<span class="string">&#x27;123456&#x27;</span>)</span>);</span><br><span class="line">	</span><br><span class="line">SELECT * FROM zb_user;</span><br><span class="line"></span><br><span class="line">SELECT * FROM zb_user</span><br><span class="line">	WHERE `name` = <span class="string">&#x27;执笔&#x27;</span> <span class="type">AND</span> <span class="variable">psw</span> <span class="operator">=</span> MD5(<span class="string">&#x27;123456&#x27;</span>);</span><br><span class="line">	</span><br><span class="line">-- PASSWORD(str) 加密函数 mysql数据库的用户密码就是PASSWORD函数加密</span><br><span class="line">SELECT <span class="title function_">PASSWORD</span><span class="params">(<span class="string">&#x27;123456&#x27;</span>)</span> FROM DUAL;</span><br><span class="line">-- mysql.user 表示 数据库.表</span><br><span class="line">SELECT * FROM mysql.user;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="流程控制函数"><a href="#流程控制函数" class="headerlink" title="流程控制函数"></a>流程控制函数</h4><div class="table-container">
<table>
<thead>
<tr>
<th>IF(expr1, expr2, expr3)</th>
<th>如果expr1为true,则返回expr2否则返回expr3</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>IFNULL(expr1, expr2)</strong></td>
<td><strong>如果expr1不为空，则返回expr1，否则返回expr2</strong></td>
</tr>
<tr>
<td><strong>SELECT CASE WHERE expr1 THEN expr2 WHERE expr3 THEN expr4 ELSE expr5 END;[类似多重分支]</strong></td>
<td><strong>如果expr1为true，则返回expr2，如果expr2为true，返回expr4，否则返回expr5</strong></td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">-- 流程控制语句</span><br><span class="line"></span><br><span class="line">-- IF(expr1,expr2,expr3) 如果expr1为<span class="literal">true</span> 就返回expr2 否则返回expr3</span><br><span class="line">SELECT <span class="title function_">IF</span><span class="params">(TRUE,<span class="string">&#x27;北京&#x27;</span>,<span class="string">&#x27;上海&#x27;</span>)</span> FROM DUAL;</span><br><span class="line">-- IFNULL(expr1,expr2) 如果expr1不为空<span class="literal">null</span>，则返回expr1 否则返回expr2</span><br><span class="line">SELECT <span class="title function_">IFNULL</span><span class="params">(NULL, <span class="string">&#x27;执笔&#x27;</span>)</span> FROM DUAL;</span><br><span class="line">-- #SELECT CASE WHEN expr1 THEN expr2 WHEN expr3 THEN expr4 ELSB expr5 END;[类似多重分支]</span><br><span class="line">-- 如果expr1为TRUE,则返回expr2,如果expr3为t，返回expr4，否则返回expr5</span><br><span class="line">SELECT CASE </span><br><span class="line">	WHEN TRUE THEN <span class="string">&#x27;jack&#x27;</span> </span><br><span class="line">	WHEN FALSE THEN <span class="string">&#x27;tom&#x27;</span> </span><br><span class="line">	ELSE <span class="string">&#x27;mary&#x27;</span> END;</span><br><span class="line">	</span><br><span class="line">-- <span class="number">1.</span> 查询emp表 如果 comm是<span class="literal">null</span> 则显示<span class="number">0.0</span></span><br><span class="line">SELECT ename, IFNULL(comm,<span class="number">0.0</span>) FROM emp;</span><br><span class="line">-- 判断是否为<span class="literal">null</span> 要使用 is <span class="literal">null</span> 半段不为空 使用 is not</span><br><span class="line">SELECT ename,IF(comm IS NULL,<span class="number">0.0</span>,comm) FROM emp;</span><br><span class="line"></span><br><span class="line">-- <span class="number">2.</span> 如果emp 表是job是CLERK 则显示职员 MANAGER显示经理 SALESMAN显示销售人员 其他正常</span><br><span class="line">SELECT ename,(SELECT CASE </span><br><span class="line">		<span class="type">WHEN</span> <span class="variable">job</span> <span class="operator">=</span> <span class="string">&#x27;CLERK&#x27;</span> THEN <span class="string">&#x27;职员&#x27;</span> </span><br><span class="line">		<span class="type">WHEN</span> <span class="variable">job</span> <span class="operator">=</span> <span class="string">&#x27;MANAGER&#x27;</span> THEN <span class="string">&#x27;经理&#x27;</span> </span><br><span class="line">		<span class="type">WHEN</span> <span class="variable">job</span> <span class="operator">=</span> <span class="string">&#x27;SALESMAN&#x27;</span> THEN <span class="string">&#x27;销售人员&#x27;</span> </span><br><span class="line">		ELSE job END) AS <span class="string">&#x27;job&#x27;</span>,job</span><br><span class="line">	FROM emp;</span><br></pre></td></tr></table></figure>
<h2 id="单表查询"><a href="#单表查询" class="headerlink" title="单表查询"></a>单表查询</h2><ul>
<li>即单张表查询</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">-- 查询加强</span><br><span class="line">-- 使用where子句</span><br><span class="line">-- 如何查找<span class="number">1992.1</span><span class="number">.1</span>后入职的员工</span><br><span class="line">-- 在mysql中，日期类型可以直接比较</span><br><span class="line">SELECT * FROM emp</span><br><span class="line">	WHERE hiredate &gt; <span class="string">&#x27;1992-01-01&#x27;</span></span><br><span class="line">-- 如何使用like操作符</span><br><span class="line">-- %表示<span class="number">0</span>到多个字符  </span><br><span class="line">-- _表示单个字符 </span><br><span class="line"></span><br><span class="line">-- 如何显示首字符为s的员工姓名和工资</span><br><span class="line">SELECT ename, sal FROM emp </span><br><span class="line">	WHERE ename LIKE <span class="string">&#x27;S%&#x27;</span>;</span><br><span class="line">-- 如何显示第三个字符为大写o的所有员工的姓名和工资</span><br><span class="line">SELECT ename, sal FROM emp</span><br><span class="line">	WHERE ename LIKE <span class="string">&#x27;__o%&#x27;</span>;</span><br><span class="line">-- 如何显示没有上级的雇员的情况</span><br><span class="line">SELECT * FROM emp</span><br><span class="line">	WHERE mgr IS NULL;</span><br><span class="line">-- 查询表结构</span><br><span class="line">DESC emp;</span><br></pre></td></tr></table></figure>
<h3 id="limit分页查询"><a href="#limit分页查询" class="headerlink" title="limit分页查询"></a>limit分页查询</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 公式</span><br><span class="line">SELECT * FROM emp</span><br><span class="line">	ORDER BY empno</span><br><span class="line">	LIMIT 每页显示记录数 * (第几页-<span class="number">1</span>), 每页显示的记录数;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- 按照雇员的empno号降序取出 每页显示<span class="number">5</span>条记录 分别显示第<span class="number">3</span>页 第<span class="number">5</span>页对应的sql语句</span><br><span class="line">-- 第三页</span><br><span class="line">SELECT * FROM emp</span><br><span class="line">	ORDER BY empno DESC</span><br><span class="line">	LIMIT <span class="number">10</span>,<span class="number">5</span>;</span><br><span class="line">-- 第五页</span><br><span class="line">SELECT * FROM emp</span><br><span class="line">	ORDER BY empno DESC</span><br><span class="line">	LIMIT <span class="number">20</span>,<span class="number">5</span>;</span><br></pre></td></tr></table></figure>
<h3 id="数据分组"><a href="#数据分组" class="headerlink" title="数据分组"></a>数据分组</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/数据分组顺序.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- 请统计各个部门的平均工资，并且是大于<span class="number">1000</span>的,并且按照平均工资从高到纸排序，</span><br><span class="line">-- 取出前两行记录.</span><br><span class="line">SELECT <span class="title function_">AVG</span><span class="params">(sal)</span> AS avg_sal, deptno</span><br><span class="line">	FROM emp</span><br><span class="line">	GROUP BY deptno </span><br><span class="line">	HAVING avg_sal &gt; <span class="number">1000</span></span><br><span class="line">	ORDER BY avg_sal DESC</span><br><span class="line">	LIMIT <span class="number">0</span>,<span class="number">2</span>;</span><br></pre></td></tr></table></figure>
<h2 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h2><ul>
<li>基于多个表进行查询</li>
</ul>
<h3 id="笛卡尔集"><a href="#笛卡尔集" class="headerlink" title="笛卡尔集"></a>笛卡尔集</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/笛卡尔集.png" alt></p>
<ul>
<li><p>在默认情况下，当两个表查询时，规则：</p>
<ul>
<li><p>从第一张表中取出一行和第二张表中的每一行进行组合，返回结果[含有两张表的所有列]</p>
</li>
<li><p>一共返回的记录数第一张表行数 * 第二张表的行数</p>
</li>
<li><p>多表默查询返回的结果，称为笛卡尔集</p>
</li>
</ul>
</li>
<li><p>解决方案：</p>
<ul>
<li><strong>添加过滤条件where</strong></li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT ename, sal, dname,emp.deptno </span><br><span class="line">	FROM emp,dept</span><br><span class="line">	WHERE emp.deptno = dept.deptno;</span><br></pre></td></tr></table></figure>
<h3 id="自连接"><a href="#自连接" class="headerlink" title="自连接"></a>自连接</h3><ul>
<li>指在同一张表的连接查询[将一张表看做两张表]</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">--  多表查询  自连接</span><br><span class="line">-- 显示公司员工 和他的上级的名字</span><br><span class="line">-- 员工名字在emp 上级的名字在emp </span><br><span class="line">-- 员工和上级是通过 emp表 的mgr列关联</span><br><span class="line">-- 自连接特点：</span><br><span class="line">-- 		<span class="number">1.</span> 把同一张表当做两张表使用</span><br><span class="line">-- 		<span class="number">2.</span> 需要给表取别名 格式： 表 别名</span><br><span class="line"></span><br><span class="line">SELECT worker.ename AS <span class="string">&#x27;职员名&#x27;</span>, boss.ename AS <span class="string">&#x27;上级名&#x27;</span></span><br><span class="line">	FROM emp worker, emp boss</span><br><span class="line">	WHERE worker.mgr = boss.empno;</span><br><span class="line"></span><br><span class="line">SELECT * FROM emp;</span><br></pre></td></tr></table></figure>
<h3 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h3><ul>
<li>指嵌入在其他sql语句中的select语句，也叫嵌套查询</li>
</ul>
<h4 id="单行子查询"><a href="#单行子查询" class="headerlink" title="单行子查询"></a>单行子查询</h4><ul>
<li>指只返回一行数据的子查询语句</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">-- 子查询使用 嵌套查询</span><br><span class="line">-- 如何显示与SMITH同一部门的所有员工</span><br><span class="line">-- 单行子查询</span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">	1. 先把查询到的SMITH的部门得到</span></span><br><span class="line"><span class="comment">	2. 把上面查询的select 语句当做一个子查询来使用</span></span><br><span class="line"><span class="comment">	</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">SELECT deptno</span><br><span class="line">	FROM emp</span><br><span class="line">	<span class="type">WHERE</span> <span class="variable">ename</span> <span class="operator">=</span> <span class="string">&#x27;SMITH&#x27;</span></span><br><span class="line">	</span><br><span class="line">SELECT * </span><br><span class="line">	FROM emp</span><br><span class="line">	<span class="type">WHERE</span> <span class="variable">deptno</span> <span class="operator">=</span> (</span><br><span class="line">		SELECT deptno</span><br><span class="line">		FROM emp</span><br><span class="line">		<span class="type">WHERE</span> <span class="variable">ename</span> <span class="operator">=</span> <span class="string">&#x27;SMITH&#x27;</span></span><br><span class="line">	);</span><br></pre></td></tr></table></figure>
<h4 id="多行子查询"><a href="#多行子查询" class="headerlink" title="多行子查询"></a>多行子查询</h4><ul>
<li>返回多行数据的子查询 使用<strong>关键字in</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">-- 多行子查询</span><br><span class="line">-- 如何查询和部门<span class="number">10</span>的工作相同的雇员</span><br><span class="line">-- 名字、岗位、工资、部门号，但是不含<span class="number">10</span>号部门自己的雇员</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1. 先获取10号部门有哪些职位</span></span><br><span class="line"><span class="comment">	2. 名字、岗位、工资、部门号，但是不含10号部门自己的雇员</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">SELECT * FROM emp;</span><br><span class="line">SELECT DISTINCT job </span><br><span class="line">	FROM emp</span><br><span class="line">	<span class="type">WHERE</span> <span class="variable">deptno</span> <span class="operator">=</span> <span class="number">20</span>;</span><br><span class="line">	</span><br><span class="line">SELECT ename, job,sal,deptno</span><br><span class="line">	FROM emp</span><br><span class="line">	WHERE job <span class="title function_">IN</span> <span class="params">(</span></span><br><span class="line"><span class="params">		SELECT DISTINCT job </span></span><br><span class="line"><span class="params">		FROM emp</span></span><br><span class="line"><span class="params">		WHERE deptno = <span class="number">20</span></span></span><br><span class="line"><span class="params">	)</span> AND deptno != <span class="number">20</span>; -- 不等于也可以换成 &lt;&gt;</span><br></pre></td></tr></table></figure>
<h4 id="临时表查询"><a href="#临时表查询" class="headerlink" title="临时表查询"></a>临时表查询</h4><ul>
<li>将子查询当做一张临时表</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT temp.ename, emp.empno </span><br><span class="line">	<span class="title function_">FROM</span> <span class="params">(SELECT ename, empno FROM emp)</span> temp, emp;</span><br></pre></td></tr></table></figure>
<h4 id="all操作符"><a href="#all操作符" class="headerlink" title="all操作符"></a>all操作符</h4> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- all </span><br><span class="line">-- 显示工资比部门<span class="number">30</span>的所有员工的工资高的员工姓名、工资和部门号</span><br><span class="line">SELECT ename,sal,deptno</span><br><span class="line">	FROM emp</span><br><span class="line">	WHERE sal &gt; ALL(</span><br><span class="line">			SELECT sal</span><br><span class="line">				FROM emp</span><br><span class="line">				<span class="type">WHERE</span> <span class="variable">deptno</span> <span class="operator">=</span> <span class="number">30</span></span><br><span class="line">				);</span><br></pre></td></tr></table></figure>
<h4 id="any操作符"><a href="#any操作符" class="headerlink" title="any操作符"></a>any操作符</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- 显示工资比部门<span class="number">30</span>的其中一个高员工的工资高的员工姓名、工资和部门号</span><br><span class="line">SELECT ename,sal,deptno</span><br><span class="line">	FROM emp</span><br><span class="line">	WHERE sal &gt; ANY(</span><br><span class="line">			SELECT sal</span><br><span class="line">				FROM emp</span><br><span class="line">				<span class="type">WHERE</span> <span class="variable">deptno</span> <span class="operator">=</span> <span class="number">30</span></span><br><span class="line">				);</span><br></pre></td></tr></table></figure>
<h4 id="多列子查询"><a href="#多列子查询" class="headerlink" title="多列子查询"></a>多列子查询</h4><ul>
<li>返回多个列数据</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-- 多列子查询</span><br><span class="line">-- 查询与smith 的部门和岗位完全相同的所有雇员(并且不含smith本人)</span><br><span class="line">-- <span class="number">1.</span> 先获取smith本人你的部门和岗位信息</span><br><span class="line">SELECT deptno, job</span><br><span class="line">	FROM emp</span><br><span class="line">	<span class="type">WHERE</span> <span class="variable">ename</span> <span class="operator">=</span> <span class="string">&#x27;SMITH&#x27;</span>;</span><br><span class="line">	</span><br><span class="line">-- <span class="number">2.</span> 查询与smith 的部门和岗位完全相同的所有雇员(并且不含smith本人)</span><br><span class="line">SELECT *</span><br><span class="line">	FROM EMP</span><br><span class="line">	<span class="title function_">WHERE</span> <span class="params">(deptno, job)</span> = (</span><br><span class="line">		SELECT deptno, job</span><br><span class="line">		FROM emp</span><br><span class="line">		<span class="type">WHERE</span> <span class="variable">ename</span> <span class="operator">=</span> <span class="string">&#x27;SMITH&#x27;</span></span><br><span class="line">	) AND ename != <span class="string">&#x27;SMITH&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h2 id="合并查询"><a href="#合并查询" class="headerlink" title="合并查询"></a>合并查询</h2><h3 id="union-all"><a href="#union-all" class="headerlink" title="union all"></a>union all</h3><ul>
<li>用于取得两个结果集的并集，使用该操作符时，不会取消重复行</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- union all 将两个查询结果合并 不会去重</span><br><span class="line">SELECT ename,sal,job FROM emp WHERE sal &gt; <span class="number">2500</span></span><br><span class="line">UNION ALL</span><br><span class="line">SELECT ename,sal,job FROM emp WHERE job=<span class="string">&#x27;MANAGER&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="union"><a href="#union" class="headerlink" title="union"></a>union</h3><ul>
<li>用于取得两个结果集的并集，使用该操作符时，会取消重复行</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- union 将两个查询结果合并 会去重</span><br><span class="line">SELECT ename,sal,job FROM emp WHERE sal &gt; <span class="number">2500</span></span><br><span class="line">UNION</span><br><span class="line">SELECT ename,sal,job FROM emp WHERE job=<span class="string">&#x27;MANAGER&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h2><h3 id="左外连接"><a href="#左外连接" class="headerlink" title="左外连接"></a>左外连接</h3><ul>
<li>左侧的表完全显示</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 左外连接 </span><br><span class="line">SELECT `name`, stu.id,grade</span><br><span class="line">	FROM stu LEFT JOIN exam</span><br><span class="line">	ON stu.id = exam.id;</span><br></pre></td></tr></table></figure>
<h3 id="右外连接"><a href="#右外连接" class="headerlink" title="右外连接"></a>右外连接</h3><ul>
<li>右侧的表完全显示</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 右外连接(显示所有成绩 如果没有名字匹配 显示空)</span><br><span class="line">-- 即：右边的表(exam) 和左表没有匹配的记录 也会把右表的记录显示出来</span><br><span class="line">SELECT `name`, stu.id,grade</span><br><span class="line">	FROM stu RIGHT JOIN exam</span><br><span class="line">	ON stu.id = exam.id;</span><br></pre></td></tr></table></figure>
<h2 id="Mysql约束"><a href="#Mysql约束" class="headerlink" title="Mysql约束"></a>Mysql约束</h2><ul>
<li>约束用于确保数据库满足特定的商业规则</li>
</ul>
<h3 id="primary-key（主键）"><a href="#primary-key（主键）" class="headerlink" title="primary key（主键）"></a>primary key（主键）</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/主键.png" alt></p>
<div class="note info flat"><p>一张表的主键一般情况下设计原则：与业务无关，无实际意义，使用自增链 AUOT_INCREMENT</p>
</div>
<ul>
<li>用于唯一标示表行的数据，当定义主键约束后，该列不能重复，且不能为null</li>
<li>一张表最多只能有一个主键，但是可以有多个复合主键</li>
<li>主键的指定方式：<ul>
<li>直接在字段名后指定：字段名 primary key</li>
<li>在表定义最后写：primary key(列名);</li>
</ul>
</li>
<li>使用desc 表名 可以查看primary key 的情况</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE <span class="title function_">t17</span></span><br><span class="line">	<span class="params">(id INT PRIMARY KEY,-- 表示id列是主键</span></span><br><span class="line"><span class="params">	`name` VARCHAR(<span class="number">32</span>)</span>,</span><br><span class="line">	email <span class="title function_">VARCHAR</span><span class="params">(<span class="number">32</span>)</span></span><br><span class="line">	);</span><br><span class="line"></span><br><span class="line">-- 主键使用细节</span><br><span class="line">-- <span class="number">1.</span> primary key不能重复而且不能为<span class="literal">null</span>。</span><br><span class="line">INSERT INTO t17</span><br><span class="line">	<span class="title function_">VALUES</span><span class="params">(NULL,<span class="string">&#x27;zb&#x27;</span>,<span class="string">&#x27;zb@sohu.com&#x27;</span>)</span>;</span><br><span class="line">-- <span class="number">2.</span> 一张表最多只能有一个主键,但可以是复合主键</span><br><span class="line">CREATE TABLE <span class="title function_">t18</span></span><br><span class="line">	<span class="params">(id INT PRIMARY KEY,-- 表示id列是主键</span></span><br><span class="line"><span class="params">	`name` VARCHAR(<span class="number">32</span>)</span> PRIMARY KEY,</span><br><span class="line">	email <span class="title function_">VARCHAR</span><span class="params">(<span class="number">32</span>)</span></span><br><span class="line">	);-- 错误写法</span><br><span class="line">	</span><br><span class="line">-- 复合主键 (id和name做成复合主键 只有Id和 name都相同才不能添加进去) </span><br><span class="line">CREATE TABLE <span class="title function_">t19</span></span><br><span class="line">	<span class="params">(id INT,</span></span><br><span class="line"><span class="params">	`name` VARCHAR(<span class="number">32</span>)</span>,</span><br><span class="line">	email <span class="title function_">VARCHAR</span><span class="params">(<span class="number">32</span>)</span>,</span><br><span class="line">	PRIMARY <span class="title function_">KEY</span><span class="params">(id,`name`)</span></span><br><span class="line">	);</span><br><span class="line"></span><br><span class="line">-- <span class="number">3.</span> 主键的指定方式有两种</span><br><span class="line">--    直接在字段名后指定:字段名primakry key   </span><br><span class="line">CREATE TABLE <span class="title function_">t20</span></span><br><span class="line">	<span class="params">(id INT PRIMARY KEY,</span></span><br><span class="line"><span class="params">	`name` VARCHAR(<span class="number">32</span>)</span>,</span><br><span class="line">	email <span class="title function_">VARCHAR</span><span class="params">(<span class="number">32</span>)</span></span><br><span class="line">	);</span><br><span class="line"> </span><br><span class="line">--    在表定义最后写primary <span class="title function_">key</span><span class="params">(列名)</span>;</span><br><span class="line">CREATE TABLE <span class="title function_">t21</span></span><br><span class="line">	<span class="params">(id INT,</span></span><br><span class="line"><span class="params">	`name` VARCHAR(<span class="number">32</span>)</span>,</span><br><span class="line">	email <span class="title function_">VARCHAR</span><span class="params">(<span class="number">32</span>)</span>,</span><br><span class="line">	PRIMARY <span class="title function_">KEY</span><span class="params">(id,`name`)</span></span><br><span class="line">	);</span><br><span class="line">-- <span class="number">4.</span> 使用desc表名，可以看到primary key的情况.</span><br><span class="line">DESC t21;</span><br></pre></td></tr></table></figure>
<h3 id="not-null-非空"><a href="#not-null-非空" class="headerlink" title="not null(非空)"></a>not null(非空)</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/非空.png" alt></p>
<ul>
<li>列上定义了not null 表示插入数据时，必须为列提供数据</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">create table <span class="title function_">student</span> <span class="params">(</span></span><br><span class="line"><span class="params">	id <span class="type">int</span> not <span class="literal">null</span>)</span>;</span><br></pre></td></tr></table></figure>
<h3 id="unique-唯一"><a href="#unique-唯一" class="headerlink" title="unique(唯一)"></a>unique(唯一)</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/唯一.png" alt></p>
<ul>
<li>当该列定义了唯一约束，该列值不能重复</li>
<li>如果没有指定not null，则unique字段可以有多个null</li>
<li>一张表可以有多个unique字段</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE <span class="title function_">t22</span></span><br><span class="line">	<span class="params">(id INT UNIQUE, -- 表示id列是不可以重复的</span></span><br><span class="line"><span class="params">	`name` VARCHAR(<span class="number">32</span>)</span>,</span><br><span class="line">	email <span class="title function_">VARCHAR</span><span class="params">(<span class="number">32</span>)</span>);</span><br><span class="line"></span><br><span class="line">-- unique 使用细节</span><br><span class="line">-- 如果没有指定not <span class="literal">null</span> 则 unique 字段可以有多个<span class="literal">null</span></span><br><span class="line">-- 如果一个列(字段) 是 unique not <span class="literal">null</span> 使用效果类似 primary key</span><br><span class="line">INSERT INTO t22 	</span><br><span class="line">	<span class="title function_">VALUES</span><span class="params">(NULL, <span class="string">&#x27;tom&#x27;</span>, <span class="string">&#x27;tom@sohu.com&#x27;</span>)</span>;</span><br><span class="line">	</span><br><span class="line">SELECT * FROM t22;</span><br><span class="line">-- 一张表可以有多个unique</span><br><span class="line">CREATE TABLE <span class="title function_">t23</span></span><br><span class="line">	<span class="params">(id INT UNIQUE, -- 表示id列是不可以重复的</span></span><br><span class="line"><span class="params">	`name` VARCHAR(<span class="number">32</span>)</span>UNIQUE,-- 表示name不可以重复</span><br><span class="line">	email <span class="title function_">VARCHAR</span><span class="params">(<span class="number">32</span>)</span>);</span><br></pre></td></tr></table></figure>
<h3 id="foreign-key-外键"><a href="#foreign-key-外键" class="headerlink" title="foreign key(外键)"></a>foreign key(外键)</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/外键.png" alt></p>
<ul>
<li>用于定义主表和从表之间的关系：外键约束要定义在从表上，主表则必须具有主键约束或是unique约束,当定义外键约束后，要求外键列数据必须在主表的主键列存在或是为null</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">-- foreign key 外键</span><br><span class="line"># 这里是给订单表设置一个外键，外键是用户表的id字段</span><br><span class="line">    CONSTRAINT `FK_orders_id` FOREIGN <span class="title function_">KEY</span> <span class="params">(`user_id`)</span> REFERENCES `user` (`id`) </span><br><span class="line">    ON DELETE NO ACTION ON UPDATE NO ACTION</span><br><span class="line"># 外键约束的格式</span><br><span class="line">    CONSTRAINT `外键约束的名称` FOREIGN <span class="title function_">KEY</span> <span class="params">(`从表字段`)</span> REFERENCES `主表名` (`主表字段`) </span><br><span class="line">    约束规则...</span><br><span class="line"></span><br><span class="line">-- 创建 主表 my_class</span><br><span class="line">CREATE TABLE <span class="title function_">my_class</span></span><br><span class="line">	<span class="params">(id INT PRIMARY KEY,</span></span><br><span class="line"><span class="params">	`name` VARCHAR(<span class="number">32</span>)</span> NOT NULL DEFAULT <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">	</span><br><span class="line">-- 创建从表 my_stu</span><br><span class="line">CREATE TABLE <span class="title function_">my_stu</span></span><br><span class="line">	<span class="params">(id INT PRIMARY KEY,</span></span><br><span class="line"><span class="params">	`name` VARCHAR(<span class="number">32</span>)</span> NOT NULL DEFAULT <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">	class_id INT,</span><br><span class="line">	-- 下面指定外键关系</span><br><span class="line">	FOREIGN <span class="title function_">KEY</span> <span class="params">(class_id)</span> REFERENCES <span class="title function_">my_class</span><span class="params">(id)</span>);</span><br><span class="line">	</span><br><span class="line">-- 测试数据</span><br><span class="line">INSERT INTO my_class</span><br><span class="line">	<span class="title function_">VALUES</span><span class="params">(<span class="number">100</span>,<span class="string">&#x27;java&#x27;</span>)</span>,(<span class="number">200</span>,<span class="string">&#x27;web&#x27;</span>);</span><br><span class="line">	</span><br><span class="line">SELECT * FROM my_class;</span><br><span class="line">INSERT INTO my_stu</span><br><span class="line">	<span class="title function_">VALUES</span><span class="params">(<span class="number">1</span>,<span class="string">&#x27;tom&#x27;</span>,<span class="number">100</span>)</span>;</span><br><span class="line">INSERT INTO my_stu</span><br><span class="line">	<span class="title function_">VALUES</span><span class="params">(<span class="number">2</span>,<span class="string">&#x27;jack&#x27;</span>,<span class="number">200</span>)</span>;</span><br><span class="line">INSERT INTO my_stu</span><br><span class="line">	<span class="title function_">VALUES</span><span class="params">(<span class="number">3</span>,<span class="string">&#x27;zb&#x27;</span>,<span class="number">300</span>)</span>; -- 这里会失败 因为<span class="number">300</span>号班级不存在</span><br><span class="line">SELECT * FROM my_stu;</span><br><span class="line"></span><br><span class="line">INSERT INTO my_stu</span><br><span class="line">	<span class="title function_">VALUES</span><span class="params">(<span class="number">4</span>,<span class="string">&#x27;zb&#x27;</span>,NULL)</span>;-- 可以加入</span><br><span class="line"></span><br><span class="line">-- 一旦建立主外键关系就不能随意删除了</span><br><span class="line">DELETE FROM my_class</span><br><span class="line">	<span class="type">WHERE</span> <span class="variable">id</span> <span class="operator">=</span> <span class="number">100</span>;</span><br></pre></td></tr></table></figure>
<h3 id="check"><a href="#check" class="headerlink" title="check"></a>check</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/check.png" alt></p>
<ul>
<li>用于强制行数据必须满足的条件</li>
<li>mysql5.7目前还不支持check，只做语法校验，不会生效</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-- check 的使用</span><br><span class="line">-- mysql <span class="number">5.7</span> 目前还不支持check 只做语法校验 但不会生效</span><br><span class="line">-- oracle sql server 这两个数据库会生效</span><br><span class="line"></span><br><span class="line">-- 测试</span><br><span class="line">CREATE TABLE <span class="title function_">t24</span> <span class="params">(</span></span><br><span class="line"><span class="params">	id INT PRIMARY KEY,</span></span><br><span class="line"><span class="params">	`name` VARCHAR(<span class="number">32</span>)</span> NOT NULL DEFAULT <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">	sex <span class="title function_">VARCHAR</span><span class="params">(<span class="number">6</span>)</span> CHECK (sex <span class="title function_">IN</span><span class="params">(<span class="string">&#x27;man&#x27;</span>,<span class="string">&#x27;woman&#x27;</span>)</span>),</span><br><span class="line">	sal DOUBLE <span class="title function_">CHECK</span> <span class="params">(sal &gt; <span class="number">1000</span> AND sal &lt; <span class="number">2000</span>)</span></span><br></pre></td></tr></table></figure>
<h2 id="自增长"><a href="#自增长" class="headerlink" title="自增长"></a>自增长</h2><ul>
<li>从1开始自动增长的整数</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/自增长.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加自增长方式</span></span><br><span class="line">insert into <span class="title function_">xxx</span><span class="params">(字段<span class="number">1</span>, 字段<span class="number">2.</span>...)</span> values(<span class="literal">null</span>,<span class="string">&#x27;值&#x27;</span>...);</span><br><span class="line">insert into <span class="title function_">xxx</span><span class="params">(字段<span class="number">2.</span>.….)</span> values(值<span class="number">1</span><span class="string">&#x27;，&quot;值2&#x27;</span>..…);</span><br><span class="line">insert into xxx <span class="title function_">values</span><span class="params">(<span class="literal">null</span>,<span class="string">&#x27;值1&#x27;</span>.....)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//细节</span></span><br><span class="line"><span class="comment">//(1)一般来说自增长是和primary key配合使用</span></span><br><span class="line"><span class="comment">//(2)自增长也可以单独使用[但是需要配合一个unique]</span></span><br><span class="line"><span class="comment">//(3)自增长修饰的字段为整数型的(虽然小数也可以但是非常非常少这样使用)</span></span><br><span class="line"><span class="comment">//(4)自增长默认从1开爱:你新的升始直;table表名auto increment =新的开始值;</span></span><br><span class="line"><span class="comment">//(5)如果你添加数据时，给自增长字段（(列)指定的有值，则以指定的值为准,如果指定了自增长，一般来说，就按照自增长的规则来添加数据</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- 自增长</span><br><span class="line">-- 创建表</span><br><span class="line">CREATE TABLE <span class="title function_">t25</span><span class="params">(</span></span><br><span class="line"><span class="params">		id INT PRIMARY KEY AUTO_INCREMENT, -- 自增长</span></span><br><span class="line"><span class="params">		email VARCHAR(<span class="number">32</span>)</span> NOT NULL DEFAULT <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">		`name` VARCHAR(<span class="number">32</span>) NOT NULL DEFAULT <span class="string">&#x27;&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h2><ul>
<li>添加索引可提高查询速率</li>
</ul>
<h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/索引原理.png" alt></p>
<h3 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h3><ul>
<li><strong>主键索引</strong>（primary key）：主键自动的为主索引</li>
<li><strong>唯一索引</strong>（unique）</li>
<li><strong>普通索引</strong>（indext）</li>
<li><strong>全文索引</strong>（fulltext）：适用于MyISAM,一般情况下不适用mysql自带的全文索引，而是使用全文搜索Solr和ElasticSearch（ES）</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">-- mysql的索引使用</span><br><span class="line">-- 创建索引</span><br><span class="line">CREATE TABLE <span class="title function_">t25</span><span class="params">(</span></span><br><span class="line"><span class="params">	id INT,</span></span><br><span class="line"><span class="params">	`name` VARCHAR(<span class="number">32</span>)</span>); </span><br><span class="line">	</span><br><span class="line">-- 查询表是否有索引</span><br><span class="line">SHOW INDEXES FROM t25; </span><br><span class="line">-- 添加索引</span><br><span class="line">-- 添加唯一索引  </span><br><span class="line">CREATE UNIQUE INDEX id_index ON <span class="title function_">t25</span><span class="params">(id)</span>;</span><br><span class="line">-- 添加普通索引方式<span class="number">1</span></span><br><span class="line">CREATE INDEX id_index ON <span class="title function_">t25</span><span class="params">(id)</span>;</span><br><span class="line">-- <span class="number">1.</span> 如果某列的值，是不会重复的 则优先考虑使用unqiue索引 否则使用普通索引</span><br><span class="line"></span><br><span class="line">-- 添加普通索引方式<span class="number">2</span></span><br><span class="line">ALTER TABLE t25 ADD INDEX <span class="title function_">id_index</span> <span class="params">(id)</span></span><br><span class="line"></span><br><span class="line">-- 添加主键索引</span><br><span class="line">-- <span class="number">1.</span> 在创建表的时候指定主键</span><br><span class="line">-- <span class="number">2.</span> 建表后添加`hzy_db02`</span><br><span class="line">CREATE TABLE <span class="title function_">t26</span><span class="params">(</span></span><br><span class="line"><span class="params">	id INT,</span></span><br><span class="line"><span class="params">	`name` VARCHAR(<span class="number">32</span>)</span>);</span><br><span class="line">	</span><br><span class="line">ALTER TABLE t26 ADD PRIMARY <span class="title function_">KEY</span> <span class="params">(id)</span></span><br><span class="line"></span><br><span class="line">SHOW INDEXES FROM t26;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- 删除索引</span><br><span class="line">DROP INDEX id_index ON t25;</span><br><span class="line"></span><br><span class="line">-- 删除主键索引</span><br><span class="line">ALTER TABLE t26 DROP PRIMARY KEY;</span><br><span class="line"></span><br><span class="line">-- 修改索引  先删除再添加新的索引</span><br><span class="line"></span><br><span class="line">-- 查询索引</span><br><span class="line">-- <span class="number">1.</span> 方式<span class="number">1</span></span><br><span class="line">SHOW INDEXES FROM t26;</span><br><span class="line">-- <span class="number">2.</span> 方式<span class="number">2</span></span><br><span class="line">SHOW INDEX FROM t26;</span><br><span class="line">-- <span class="number">3.</span> 方式<span class="number">3</span></span><br><span class="line">SHOW KEYS FROM t26;</span><br><span class="line">-- <span class="number">4.</span> 方式<span class="number">4</span></span><br><span class="line">DESC t26;</span><br></pre></td></tr></table></figure>
<h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2><ul>
<li>用于保证数据的一致性，它由一组相关的dml语句组成，该组的dml语句要么全部成功，要么全部失败</li>
</ul>
<h3 id="事务和锁"><a href="#事务和锁" class="headerlink" title="事务和锁"></a>事务和锁</h3><ul>
<li>当执行事务操作时(dml语句),mysql会在表上加锁,防止其它用户改表的数据.这对用户来讲是非常重要的</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//mysql数据库控制台事务的几个重要操作</span></span><br><span class="line">(<span class="number">1</span>) start transaction <span class="comment">//开始一个事务</span></span><br><span class="line">(<span class="number">2</span>) savepoint<span class="comment">//保存点名--设置保存点</span></span><br><span class="line">(<span class="number">3</span>) rollback to<span class="comment">//保存点名--回退事务</span></span><br><span class="line">(<span class="number">4</span>) rollback <span class="comment">//回退全部事务</span></span><br><span class="line">(<span class="number">5</span>) commit<span class="comment">//提交事务,所有的操作生效,不能回退</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">-- 事务操作</span><br><span class="line"></span><br><span class="line">-- 创建表</span><br><span class="line">CREATE TABLE <span class="title function_">t27</span><span class="params">(</span></span><br><span class="line"><span class="params">	id INT PRIMARY KEY,</span></span><br><span class="line"><span class="params">	`name` VARCHAR(<span class="number">32</span>)</span> NOT NULL DEFAULT <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">	</span><br><span class="line">-- 开启事务</span><br><span class="line">START TRANSACTION;</span><br><span class="line">-- 设置事务保存点</span><br><span class="line">SAVEPOINT a;</span><br><span class="line"></span><br><span class="line">-- 执行dml语句</span><br><span class="line">INSERT INTO t27 <span class="title function_">VALUES</span><span class="params">(<span class="number">1</span>,<span class="string">&#x27;tom&#x27;</span>)</span>;</span><br><span class="line"></span><br><span class="line">SELECT * FROM t27;</span><br><span class="line">-- 执行dml语句</span><br><span class="line">SAVEPOINT b;</span><br><span class="line">INSERT INTO t27 <span class="title function_">VALUES</span><span class="params">(<span class="number">2</span>,<span class="string">&#x27;jack&#x27;</span>)</span>;</span><br><span class="line"></span><br><span class="line">-- 回退事务</span><br><span class="line">ROLLBACK TO a;</span><br><span class="line"></span><br><span class="line">-- 回退全部事务</span><br><span class="line">ROLLBACK;</span><br><span class="line"></span><br><span class="line">-- 提交事务</span><br><span class="line">COMMIT;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//细节</span></span><br><span class="line"><span class="number">1</span>．如果不开始事务，默认情况下，dml操作是自动提交的，不能回滚</span><br><span class="line"><span class="number">2</span>．如果开始一个事务，你没有创建保存点.你可以执行rollback，默认就是回退到你事务开始的状态.</span><br><span class="line"><span class="number">3.</span>你也可以在这个事务中(还没有提交时).创建多个保存点.比如:savepoint aaa;执行dml , savepoint bbb;</span><br><span class="line"><span class="number">4.</span>你可以在事务没有提交前，选择回退到哪个保存点.</span><br><span class="line"><span class="number">5.</span> mysql的事务机制需要innodb的存储引擎还可以使用,myisam不好使.</span><br><span class="line"><span class="number">6</span>．开始一个事务start transaction, set autocommit=off;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">-- 事务细节</span><br><span class="line"></span><br><span class="line">-- <span class="number">1.</span> 如果不开启事务，默认情况下 dml操作是自动提交的 不能回滚</span><br><span class="line">INSERT INTO t27 <span class="title function_">VALUES</span><span class="params">(<span class="number">3</span>,<span class="string">&#x27;mary&#x27;</span>)</span>;-- 自动提交 commit</span><br><span class="line">SELECT * FROM t27;</span><br><span class="line"></span><br><span class="line">-- <span class="number">2.</span> 如果开启一个事务，没有创建保存点 执行rollback </span><br><span class="line">-- 默认回退到事务开始的状态</span><br><span class="line">START TRANSACTION;</span><br><span class="line">INSERT INTO t27 <span class="title function_">VALUES</span><span class="params">(<span class="number">4</span>,<span class="string">&#x27;smith&#x27;</span>)</span>;</span><br><span class="line"></span><br><span class="line">INSERT INTO t27 <span class="title function_">VALUES</span><span class="params">(<span class="number">5</span>,<span class="string">&#x27;kin&#x27;</span>)</span>;</span><br><span class="line">ROLLBACK -- 直接回退到事务开始的状态</span><br><span class="line">COMMIT;</span><br><span class="line">-- <span class="number">3.</span> 在事务没提交前可以创建 多个保存点 savepoint aaa  savepoint bbb</span><br><span class="line">-- <span class="number">4.</span> 事务没有提交前 可以选择回退到那个保存点</span><br><span class="line">-- <span class="number">5.</span> Innodb 存储引擎支持事务  MyISAM不支持</span><br><span class="line">-- <span class="number">6.</span> 开始一个事务 start transaction, set autocommit=off;</span><br><span class="line"><span class="type">SET</span> <span class="variable">autocommit</span> <span class="operator">=</span>off;</span><br></pre></td></tr></table></figure>
<h3 id="隔离级别"><a href="#隔离级别" class="headerlink" title="隔离级别"></a>隔离级别</h3><ul>
<li><p>多个连接开启各自事务操作数据库中数据时，数据库系统要负责隔离操作，以保证各个连接在获取数据时的准确性。如果不考虑隔离性，可能会引发如下问题：<strong>脏读、不可重复读、幻读</strong></p>
</li>
<li><p><strong>脏读(dirty read)：</strong>当一个事务读取另一个事务尚未提交的修改时，产生脏读</p>
</li>
<li><strong>不可重复读(nonrepeatable read)：</strong>同一查询在同一事务中多次进行，由于其他提交事务所做的修改或删除，每次返回不同的结果集，此时发生不可重复读。</li>
<li><strong>幻读(phantom read)：</strong>同一查询在同一事务中多次进行，由于其他提交事务所做的插入操作,每次返回不同的结果集，此时发生幻读。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/隔离级别.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">-- mysql事务  隔离级别</span><br><span class="line">-- <span class="number">1.</span> 登入mysql</span><br><span class="line">mysql -u root -p;</span><br><span class="line"></span><br><span class="line">-- <span class="number">2.</span> 查询当前事务的隔离级别</span><br><span class="line">SELECT @<span class="meta">@tx_isolation</span>;</span><br><span class="line"></span><br><span class="line">-- mysql&gt; SELECT @<span class="meta">@tx_isolation</span>;</span><br><span class="line">-- +-----------------+</span><br><span class="line">-- | @<span class="meta">@tx_isolation</span>  |</span><br><span class="line">-- +-----------------+</span><br><span class="line">-- | REPEATABLE-READ |</span><br><span class="line">-- +-----------------+</span><br><span class="line"></span><br><span class="line">-- <span class="number">3.</span> 把其中一个控制台的隔离级别设置为 Read uncommitted</span><br><span class="line">SET SESSION TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;</span><br><span class="line"></span><br><span class="line">-- <span class="number">4.</span> 选择数据库 </span><br><span class="line">USE 数据库名</span><br><span class="line"></span><br><span class="line">-- <span class="number">5.</span> 创建表</span><br><span class="line">CREATE TABLE `account`(</span><br><span class="line">	id INT,</span><br><span class="line">	`name` VARCHAR(<span class="number">32</span>),</span><br><span class="line">	money INT);</span><br><span class="line">	</span><br><span class="line">-- 查看当前会话隔离级别</span><br><span class="line">SELECT @<span class="meta">@tx_isolation</span>;</span><br><span class="line">-- 查看系统当前会话级别</span><br><span class="line">SELECT @<span class="meta">@global</span>.tx_isolation;</span><br><span class="line">-- 设置当前会话级别</span><br><span class="line">SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;</span><br><span class="line"></span><br><span class="line">-- 设置系统当前隔离级别</span><br><span class="line">SET GLOBAL TRANSACTION ISOLATION LEVEL [设置的级别]</span><br></pre></td></tr></table></figure>
<ul>
<li>全局修改</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//修改mysql.ini配置文件，在最后加上</span></span><br><span class="line">#可选参数有:READ-UNCOMMITTED,READ-COMMITTED,REPEATABLE-READ,SERIALIZABLE.</span><br><span class="line">[mysqld]</span><br><span class="line">transaction-isolation = REPEATABLE-READ</span><br></pre></td></tr></table></figure>
<h3 id="acid特性"><a href="#acid特性" class="headerlink" title="acid特性"></a>acid特性</h3><h4 id="原子性（Atomicity）"><a href="#原子性（Atomicity）" class="headerlink" title="原子性（Atomicity）"></a>原子性（Atomicity）</h4><ul>
<li>原子性是指事务是一个不可分割的工作单位，事务中的操作要么都发生，要么都不发生</li>
</ul>
<h4 id="一致性-Consistency"><a href="#一致性-Consistency" class="headerlink" title="一致性(Consistency)"></a>一致性(Consistency)</h4><ul>
<li>事务必须使数据库从一个一致性状态变换到另外一个一致性状态</li>
</ul>
<h4 id="隔离性-lsolation"><a href="#隔离性-lsolation" class="headerlink" title="隔离性(lsolation)"></a>隔离性(lsolation)</h4><ul>
<li>事务的隔离性是多个用户并发访问数据库时，数据库为每一个用户开启的事务，不能被其他事务的操作数据所干扰，多个并发事务之间要相互隔离</li>
</ul>
<h4 id="持久性-Durability"><a href="#持久性-Durability" class="headerlink" title="持久性(Durability)"></a>持久性(Durability)</h4><ul>
<li>持久性是指一个事务一旦被提交，它对数据库中数据的改变就是永久性的，接下来即使数据库发生故障也不应该对其有任何影响</li>
</ul>
<h3 id="表类型和存储引擎"><a href="#表类型和存储引擎" class="headerlink" title="表类型和存储引擎"></a>表类型和存储引擎</h3><h4 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h4><ul>
<li>MySQL的表类型由存储引擎(Storage Engines)决定,主要包括MylSANinnoDB、Memory等。</li>
<li>MySQL数据表主要支持六种类型，分别是:CSV、Memory、ARCHIVE、MRG MYISAM、MYISAM、 InnoBDB。</li>
<li>这六种又分为两类，一类是”事务安全型”(transaction-safe)，比如：InnoDB；其余都属于第二类，称为”非事务安全型”(non-transaction-safe)[mysiam 和memory].</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//显示当前数据库支持的 存储引擎</span></span><br><span class="line">show engines;</span><br><span class="line"><span class="comment">//修改存储引擎</span></span><br><span class="line">ALTER TABLE `表名` ENGINE = 存储引擎;</span><br></pre></td></tr></table></figure>
<h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><div class="table-container">
<table>
<thead>
<tr>
<th>特点</th>
<th>Myisam</th>
<th>Innodb</th>
<th>Memory</th>
<th>Archive</th>
</tr>
</thead>
<tbody>
<tr>
<td>批量插入的速度</td>
<td>高</td>
<td>低</td>
<td>高</td>
<td>非常高</td>
</tr>
<tr>
<td>事务安全</td>
<td></td>
<td>支持</td>
<td></td>
<td></td>
</tr>
<tr>
<td>全文索引</td>
<td>支持</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>锁机制</td>
<td>表锁</td>
<td>行锁</td>
<td>表锁</td>
<td>行锁</td>
</tr>
<tr>
<td>存储限制</td>
<td>没有</td>
<td>64TB</td>
<td>有</td>
<td>没有</td>
</tr>
<tr>
<td>B树索引</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td></td>
</tr>
<tr>
<td>哈希索引</td>
<td></td>
<td>支持</td>
<td>支持</td>
<td></td>
</tr>
<tr>
<td>集群索引</td>
<td></td>
<td>支持</td>
<td></td>
<td></td>
</tr>
<tr>
<td>数据缓存</td>
<td></td>
<td>支持</td>
<td>支持</td>
<td></td>
</tr>
<tr>
<td>索引缓存</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td></td>
</tr>
<tr>
<td>数据可压缩</td>
<td>支持</td>
<td></td>
<td></td>
<td>支持</td>
</tr>
<tr>
<td>空间使用</td>
<td>低</td>
<td>高</td>
<td>N/A</td>
<td>非常低</td>
</tr>
<tr>
<td>内存使用</td>
<td>低</td>
<td>高</td>
<td>中等</td>
<td>低</td>
</tr>
<tr>
<td>支持外键</td>
<td></td>
<td>支持</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<ul>
<li><p>MyISAM不支持事务、也不支持外键，但其访问速度快，对事务完整性没有要求</p>
</li>
<li><p>InnoDB存储引擎提供了具有提交、回滚和崩溃恢复能力的事务安全。但是比起MylSAM存储引擎，InnoDB写的处理效率差一些并且会占用更多的磁盘空间以保留数据和索引。</p>
</li>
<li><p>MEMORY存储引擎使用存在内存中的内容来创建表。每个MEMORY表只实际对应一个磁盘文件。MEMORY类型的表访问非常得快，因为它的数据是放在内存中的，并且默认使用HASH索引。但是一旦服务关闭，表中的数据就会丢失掉，表的结构还在。</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">-- 显示所有引擎</span><br><span class="line">SHOW ENGINES</span><br><span class="line"></span><br><span class="line">-- innodb 存储引擎 </span><br><span class="line">-- <span class="number">1.</span> 支持事务</span><br><span class="line">-- <span class="number">2.</span> 支持外键</span><br><span class="line">-- <span class="number">3.</span> 支持行级锁</span><br><span class="line"></span><br><span class="line">-- myisam 存储引擎</span><br><span class="line">CREATE TABLE <span class="title function_">t28</span> <span class="params">(</span></span><br><span class="line"><span class="params">	id INT,</span></span><br><span class="line"><span class="params">	`name` VARCHAR(<span class="number">32</span>)</span>) ENGINE MYISAM;</span><br><span class="line">	</span><br><span class="line">-- <span class="number">1.</span> 添加速度快</span><br><span class="line">-- <span class="number">2.</span> 不支持外键和事务</span><br><span class="line">-- <span class="number">3.</span> 支持表级锁</span><br><span class="line"></span><br><span class="line">START TRANSACTION;</span><br><span class="line">SAVEPOINT t1;</span><br><span class="line">INSERT INTO t28 <span class="title function_">VALUES</span><span class="params">(<span class="number">1</span>, <span class="string">&#x27;jack&#x27;</span>)</span>;</span><br><span class="line">SELECT * FROM t28;</span><br><span class="line">ROLLBACK TO t1;</span><br><span class="line"></span><br><span class="line">-- memory 存储引擎</span><br><span class="line">-- <span class="number">1.</span> 数据存储在内存中[关闭mysql服务，数据丢失，但是表结构仍存在]</span><br><span class="line">-- <span class="number">2.</span> 执速度很快(没有IO读写)</span><br><span class="line">-- <span class="number">3.</span> 默认支持索引(hash表)</span><br><span class="line"></span><br><span class="line">CREATE TABLE <span class="title function_">t29</span> <span class="params">(</span></span><br><span class="line"><span class="params">	id INT,</span></span><br><span class="line"><span class="params">	`name` VARCHAR(<span class="number">32</span>)</span>) ENGINE MEMORY;</span><br><span class="line">	</span><br><span class="line">-- 修改存储引擎</span><br><span class="line">ALTER TABLE <span class="type">t29</span> <span class="variable">ENGINE</span> <span class="operator">=</span> INNODB;</span><br></pre></td></tr></table></figure>
<h4 id="选择"><a href="#选择" class="headerlink" title="选择"></a>选择</h4><ul>
<li>如果你的应用不需要事务，处理的只是基本的CRUD操作，那么MylSAM是不二选择,速度快</li>
<li>如果需要支持事务，选择lnnoDB</li>
<li>Memory存储引擎就是将数据存储在内存中，由于没有磁盘I./O的等待，速度极快。但由于是内存存储引擎，所做的任何修改在服务器重启后都将消失。(经典用法用户的在线状态().)</li>
</ul>
<h2 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h2><ul>
<li>视图是一个虚拟表，其内容由查询定义，视图包含列，其数据来自对应的基表</li>
</ul>
<h3 id="视图和基表的关系"><a href="#视图和基表的关系" class="headerlink" title="视图和基表的关系"></a>视图和基表的关系</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/视图和基表的关系.png" alt></p>
<h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//基本使用</span></span><br><span class="line"><span class="number">1.</span> create view视图名as select语句</span><br><span class="line"><span class="number">2.</span> alter view视图名as select语句</span><br><span class="line"><span class="number">3.</span> SHoW CREATE VIEW 视图名</span><br><span class="line"><span class="number">4.</span> drop view视图名<span class="number">1</span>,视图名<span class="number">2</span></span><br><span class="line"> </span><br><span class="line">-- 视图的使用</span><br><span class="line">-- 创建一个视图emp_view01，只能查询emp表的(empno、ename. job和deptno)信息</span><br><span class="line">-- 创建视图</span><br><span class="line">CREATE VIEW emp_view01</span><br><span class="line">	AS</span><br><span class="line">	SELECT empno, ename, job, deptno FROM emp;</span><br><span class="line">	</span><br><span class="line">-- 查看视图</span><br><span class="line">DESC emp_view01;</span><br><span class="line">SELECT * FROM emp_view01;</span><br><span class="line"></span><br><span class="line">-- 查看创建视图的指令</span><br><span class="line">SHOW CREATE VIEW emp_view01;</span><br><span class="line"></span><br><span class="line">-- 删除视图</span><br><span class="line">DROP VIEW emp_view01;</span><br><span class="line">    </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="细节"><a href="#细节" class="headerlink" title="细节"></a>细节</h3><ul>
<li><p>创建视图后，查询数据库文件，视图只有一个结构文件(形式：视图名.frm)</p>
</li>
<li><p>视图的数据变化会影响到基表，基表的数据变化也会影响到视图</p>
</li>
<li>视图中可以在使用视图</li>
</ul>
<h4 id="特点-1"><a href="#特点-1" class="headerlink" title="特点"></a>特点</h4><ul>
<li><strong>安全</strong>。一些数据表有着重要的信息。有些字段是保密的，不能让用户直接看到。这时就可以创建一个视图，在这张视图中只保留一部分字段。这样，用户就可以查询自己需要的字段，不能查看保密的字段。</li>
<li><strong>性能</strong>。关系数据库的数据常常会分表存储，使用外键建立这些表的之间关系。这时,数据库查询通常会用到连接(JOIN)。这样做不但麻烦，效率相对也比较低。如果建立一个视图，将相关的表和字段组合在一起，就可以避免使用JOIN查询数据。</li>
<li>灵活。如果系统中有一张旧的表，这张表由于设计的问题，即将被废弃。然而，很多应用都是基于这张表，不易修改。这时就可以建立一张视图，视图中的数据直接映射到新建的表。这样，就可以少做很多改动，也达到了升级数据表的目的。</li>
</ul>
<h2 id="Mysql管理"><a href="#Mysql管理" class="headerlink" title="Mysql管理"></a>Mysql管理</h2><ul>
<li>mysql中的用户，都存储在系统数据库mysql中user表中</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/4a1b/mysql%E7%94%A8%E6%88%B7%E8%A1%A8.png" class title="mysql用户表">
<ul>
<li>host：允许登入的地址，localhost表示该用户只允许本机登入，也可以指定ip地址登入如：192.168.1.100</li>
<li>user：用户名</li>
<li>authentication_string：密码，是通过mysql的password()函数加密之后的密码</li>
</ul>
<h3 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建用户 同时指定密码</span></span><br><span class="line">create user <span class="string">&#x27;用户名&#x27;</span> @<span class="string">&#x27;允许登入的位置&#x27;</span> identified by <span class="string">&#x27;密码&#x27;</span>;</span><br><span class="line">    </span><br><span class="line"><span class="comment">//删除用户</span></span><br><span class="line">drop user <span class="string">&#x27;用户名&#x27;</span> @<span class="string">&#x27;允许登入的位置&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//修改用户密码(需要权限)</span></span><br><span class="line"><span class="comment">//修改自己的密码</span></span><br><span class="line"><span class="type">set</span> <span class="variable">password</span> <span class="operator">=</span> password(<span class="string">&#x27;密码&#x27;</span>);</span><br><span class="line"><span class="comment">//修改他人密码(需要有修改权限)</span></span><br><span class="line">set password <span class="keyword">for</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;登入位置&#x27;</span> = password(密码);</span><br></pre></td></tr></table></figure>
<h3 id="mysql权限"><a href="#mysql权限" class="headerlink" title="mysql权限"></a>mysql权限</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/undefined/4a1b/Mysql权限.png" alt></p>
<h4 id="给用户授权"><a href="#给用户授权" class="headerlink" title="给用户授权"></a>给用户授权</h4><h5 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant 权限列表 on 库.对象名to<span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;登录位置&#x27;</span>[identified by<span class="string">&#x27;密码&#x27;</span>]</span><br></pre></td></tr></table></figure>
<h5 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 权限列表，多个权限用逗号分开</span></span><br><span class="line">grant select on .......</span><br><span class="line">grant select,delete,create on .....</span><br><span class="line">grant all 【privileges】on .....<span class="comment">//表示赋予该用户在该对象上的所有权限</span></span><br><span class="line"><span class="comment">//2. 特别说明</span></span><br><span class="line">*.*：代表本系统中的所有数据库的所有对象(表，视图，存储过程)</span><br><span class="line">库.*：表示某个数据库中的所有数据对象(表，视图，存储过程等)</span><br><span class="line"><span class="comment">//3. identified by可以省略，也可以写出.</span></span><br><span class="line"><span class="comment">//(1)如果用户存在，就是修改该用户的密码。</span></span><br><span class="line"><span class="comment">//(2)如果该用户不存在，就是创建该用户!</span></span><br></pre></td></tr></table></figure>
<h4 id="回收用户授权"><a href="#回收用户授权" class="headerlink" title="回收用户授权"></a>回收用户授权</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">revoke 权限列表 on 库.对象名 from <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;登入位置&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h4 id="权限生效指令"><a href="#权限生效指令" class="headerlink" title="权限生效指令"></a>权限生效指令</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>
<h3 id="细节-1"><a href="#细节-1" class="headerlink" title="细节"></a>细节</h3><ul>
<li>在创建用户的时候，如果不指定Host,则为%，%表示表示所有IP都有连接权限create user xxX</li>
<li>你也可以这样指定create user ‘xxx’ @’192.168.1.%’表示xxx用户在192.168.1.*的ip可以登录mysql</li>
<li>在删除用户的时候，如果host 不是%需要明确指定‘用户’@’host值’</li>
</ul>
<h2 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line">-- 设学校环境如下:一个系有若干个专业，每个专业一年只招一个班，每个班有若干个学生。</span><br><span class="line">-- 现要建立关于系、学生、班级的数据库，关系模式为:</span><br><span class="line">-- 班CLASS (班号classid，专业名subject，系名deptname，入学年份enrolltime，人数num)</span><br><span class="line">CREATE TABLE <span class="title function_">class</span><span class="params">(</span></span><br><span class="line"><span class="params">	classid INT PRIMARY KEY NOT NULL,</span></span><br><span class="line"><span class="params">	`subject` VARCHAR(<span class="number">32</span>)</span> NOT NULL DEFAULT <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">	deptname <span class="title function_">VARCHAR</span><span class="params">(<span class="number">32</span>)</span> NOT NULL DEFAULT <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">	enroltime YEAR NOT NULL,</span><br><span class="line">	num INT NOT NULL DEFAULT <span class="number">0</span>,</span><br><span class="line">	FOREIGN <span class="title function_">KEY</span> <span class="params">(deptname)</span> REFERENCES <span class="title function_">department</span><span class="params">(deptname)</span>);</span><br><span class="line">	</span><br><span class="line">SELECT * FROM class;</span><br><span class="line">DROP TABLE class;</span><br><span class="line"></span><br><span class="line">-- 学生STUDENT (学号studentid，姓名name，年龄age，班号classid)</span><br><span class="line">CREATE TABLE <span class="title function_">students</span> <span class="params">(</span></span><br><span class="line"><span class="params">	studentid INT PRIMARY KEY NOT NULL,</span></span><br><span class="line"><span class="params">	`name` VARCHAR(<span class="number">32</span>)</span> NOT NULL DEFAULT <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">	age INT NOT NULL DEFAULT <span class="number">0</span>,</span><br><span class="line">	classid INT NOT NULL,</span><br><span class="line">	FOREIGN <span class="title function_">KEY</span> <span class="params">(classid)</span> REFERENCES <span class="title function_">class</span><span class="params">(classid)</span>);</span><br><span class="line">SELECT * FROM students;</span><br><span class="line">DROP TABLE students;</span><br><span class="line"></span><br><span class="line">-- 系DEPARTMENT(系号departmentid，系名deptname)</span><br><span class="line">CREATE TABLE <span class="title function_">department</span><span class="params">(</span></span><br><span class="line"><span class="params">	departmentid VARCHAR(<span class="number">32</span>)</span> NOT NULL DEFAULT <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">	deptname <span class="title function_">VARCHAR</span><span class="params">(<span class="number">32</span>)</span> PRIMARY KEY NOT NULL DEFAULT <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">DESC department;</span><br><span class="line">SELECT * FROM department;</span><br><span class="line">DROP TABLE department;</span><br><span class="line"></span><br><span class="line">-- 添加</span><br><span class="line">INSERT INTO department <span class="title function_">VALUES</span><span class="params">(<span class="string">&#x27;001&#x27;</span>,<span class="string">&#x27;数学&#x27;</span>)</span>,(<span class="string">&#x27;002&#x27;</span>,<span class="string">&#x27;计算机&#x27;</span>),(<span class="string">&#x27;003&#x27;</span>,<span class="string">&#x27;化学&#x27;</span>),(<span class="string">&#x27;004&#x27;</span>,<span class="string">&#x27;中文&#x27;</span>),(<span class="string">&#x27;005&#x27;</span>,<span class="string">&#x27;经济&#x27;</span>);</span><br><span class="line">DELETE FROM department;</span><br><span class="line"></span><br><span class="line">INSERT INTO <span class="keyword">class</span> </span><br><span class="line">	<span class="title class_">VALUES</span>(<span class="number">101</span>,<span class="string">&#x27;软件&#x27;</span>,<span class="string">&#x27;计算机&#x27;</span>,<span class="number">1995</span>,<span class="number">20</span>),</span><br><span class="line">		(<span class="number">102</span>,<span class="string">&#x27;微电子&#x27;</span>,<span class="string">&#x27;计算机&#x27;</span>,<span class="number">1996</span>,<span class="number">30</span>),</span><br><span class="line">		(<span class="number">111</span>,<span class="string">&#x27;无机化学&#x27;</span>,<span class="string">&#x27;化学&#x27;</span>,<span class="number">1995</span>,<span class="number">29</span>),</span><br><span class="line">		(<span class="number">112</span>,<span class="string">&#x27;高分子化学&#x27;</span>,<span class="string">&#x27;化学&#x27;</span>,<span class="number">1996</span>,<span class="number">25</span>),</span><br><span class="line">		(<span class="number">121</span>,<span class="string">&#x27;统计数学&#x27;</span>,<span class="string">&#x27;数学&#x27;</span>,<span class="number">1995</span>,<span class="number">20</span>),</span><br><span class="line">		(<span class="number">131</span>,<span class="string">&#x27;现代语言&#x27;</span>,<span class="string">&#x27;数学&#x27;</span>,<span class="number">1996</span>,<span class="number">30</span>),</span><br><span class="line">		(<span class="number">141</span>,<span class="string">&#x27;国际贸易&#x27;</span>,<span class="string">&#x27;经济&#x27;</span>,<span class="number">1997</span>,<span class="number">30</span>),</span><br><span class="line">		(<span class="number">142</span>,<span class="string">&#x27;国际金融&#x27;</span>,<span class="string">&#x27;经济&#x27;</span>,<span class="number">1996</span>,<span class="number">14</span>);</span><br><span class="line">		</span><br><span class="line">INSERT INTO students </span><br><span class="line">	<span class="title function_">VALUES</span><span class="params">(<span class="string">&#x27;8101&#x27;</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="number">18</span>,<span class="number">101</span>)</span>,</span><br><span class="line">		(<span class="string">&#x27;8102&#x27;</span>,<span class="string">&#x27;钱四&#x27;</span>,<span class="number">16</span>,<span class="number">121</span>),</span><br><span class="line">		(<span class="string">&#x27;8103&#x27;</span>,<span class="string">&#x27;王玲&#x27;</span>,<span class="number">17</span>,<span class="number">131</span>),</span><br><span class="line">		(<span class="string">&#x27;8105&#x27;</span>,<span class="string">&#x27;李飞&#x27;</span>,<span class="number">19</span>,<span class="number">102</span>),</span><br><span class="line">		(<span class="string">&#x27;8109&#x27;</span>,<span class="string">&#x27;赵四&#x27;</span>,<span class="number">18</span>,<span class="number">141</span>),</span><br><span class="line">		(<span class="string">&#x27;8110&#x27;</span>,<span class="string">&#x27;李可&#x27;</span>,<span class="number">20</span>,<span class="number">142</span>),</span><br><span class="line">		(<span class="string">&#x27;8201&#x27;</span>,<span class="string">&#x27;张飞&#x27;</span>,<span class="number">18</span>,<span class="number">111</span>),</span><br><span class="line">		(<span class="string">&#x27;8302&#x27;</span>,<span class="string">&#x27;周瑜&#x27;</span>,<span class="number">16</span>,<span class="number">112</span>),</span><br><span class="line">		(<span class="string">&#x27;8203&#x27;</span>,<span class="string">&#x27;王亮&#x27;</span>,<span class="number">17</span>,<span class="number">111</span>),</span><br><span class="line">		(<span class="string">&#x27;8305&#x27;</span>,<span class="string">&#x27;董庆&#x27;</span>,<span class="number">19</span>,<span class="number">102</span>),</span><br><span class="line">		(<span class="string">&#x27;8409&#x27;</span>,<span class="string">&#x27;赵龙&#x27;</span>,<span class="number">18</span>,<span class="number">101</span>),</span><br><span class="line">		(<span class="string">&#x27;8510&#x27;</span>,<span class="string">&#x27;李丽&#x27;</span>,<span class="number">20</span>,<span class="number">142</span>);</span><br><span class="line">		</span><br><span class="line">-- (<span class="number">3</span>)完成以下查询功能</span><br><span class="line">-- <span class="number">3.1</span>找出所有姓李的学生。</span><br><span class="line">SELECT * FROM students</span><br><span class="line">	WHERE `name` LIKE <span class="string">&#x27;李%&#x27;</span>;</span><br><span class="line">-- <span class="number">3.2</span> 列出所有开设超过<span class="number">1</span>个专业的系的名字。</span><br><span class="line">SELECT * FROM department;</span><br><span class="line">SELECT * FROM class;</span><br><span class="line"></span><br><span class="line">SELECT <span class="title function_">COUNT</span><span class="params">(*)</span> AS nums,deptname</span><br><span class="line">	FROM <span class="keyword">class</span></span><br><span class="line">	<span class="title class_">GROUP</span> BY deptname HAVING nums &gt; <span class="number">1</span>;</span><br><span class="line">	</span><br><span class="line">-- <span class="number">3.3</span>列出人数大于等于<span class="number">30</span>的系的编号和名字。</span><br><span class="line">-- <span class="number">1.</span> 先查出各个系有多少个人</span><br><span class="line">SELECT <span class="title function_">SUM</span><span class="params">(num)</span> AS nums,deptname</span><br><span class="line">	FROM <span class="keyword">class</span></span><br><span class="line">	<span class="title class_">GROUP</span> BY deptname HAVING nums &gt; <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line">-- <span class="number">2.</span> 看成零时表进行与department 组合查找</span><br><span class="line">SELECT departmentid, department.deptname,nums</span><br><span class="line">	FROM department,(</span><br><span class="line">		SELECT <span class="title function_">SUM</span><span class="params">(num)</span> AS nums,deptname</span><br><span class="line">		FROM <span class="keyword">class</span></span><br><span class="line">		<span class="title class_">GROUP</span> BY deptname HAVING nums &gt; <span class="number">30</span></span><br><span class="line">	) tem</span><br><span class="line">	WHERE tem.deptname = department.deptname;</span><br><span class="line">	</span><br><span class="line">-- (<span class="number">4</span>)学校又新增加了一个物理系，编号为<span class="number">006</span></span><br><span class="line">INSERT INTO department <span class="title function_">VALUES</span><span class="params">(<span class="string">&#x27;006&#x27;</span>,<span class="string">&#x27;物理系&#x27;</span>)</span>;</span><br><span class="line"></span><br><span class="line">-- (<span class="number">5</span>)学生张三退学，请更新相关的表</span><br><span class="line">-- 分析：<span class="number">1.</span> 张三所在班级的人数-<span class="number">1</span> <span class="number">2.</span> 将张三从学生表删除 <span class="number">3.</span> 需要使用事务控制</span><br><span class="line">-- 开启事务</span><br><span class="line">START TRANSACTION;</span><br><span class="line"></span><br><span class="line">-- 张三所在班级的人数-<span class="number">1</span></span><br><span class="line">UPDATE <span class="keyword">class</span> <span class="title class_">SET</span> num = num - <span class="number">1</span></span><br><span class="line">	<span class="type">WHERE</span> <span class="variable">classid</span> <span class="operator">=</span> (</span><br><span class="line">		SELECT classid</span><br><span class="line">			FROM students</span><br><span class="line">			WHERE `name` = <span class="string">&#x27;张三&#x27;</span></span><br><span class="line">	);</span><br><span class="line"></span><br><span class="line">DELETE FROM students</span><br><span class="line">	WHERE `name` = <span class="string">&#x27;张三&#x27;</span>;</span><br><span class="line">	</span><br><span class="line">-- 提交事务</span><br><span class="line">COMMIT;</span><br><span class="line">SELECT * FROM students;</span><br><span class="line">SELECT * FROM class;</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/./img/avatar.png" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/./img/avatar.png" title="头像" alt="头像"></a><div class="post-copyright__author_name">执笔</div><div class="post-copyright__author_desc">执笔のNote</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://yigefanren5-2.github.io/undefined/4a1b.html">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://yigefanren5-2.github.io/undefined/4a1b.html')">java学习笔记（二十四） - MySQL数据库</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="reward-link mode"><a class="reward-link-button" href="/wechat/"><i class="anzhiyufont anzhiyu-icon-plant-fill"></i>运营模式与责任</a></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://yigefanren5-2.github.io/undefined/4a1b.html"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=java学习笔记（二十四） - MySQL数据库&amp;url=http://yigefanren5-2.github.io/undefined/4a1b.html&amp;pic=https://zhib0.oss-cn-hangzhou.aliyuncs.com/img/mysql20240610.jpg" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://YiGeFanRen5-2.github.io" target="_blank">执笔のNote</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__category-list"><a class="post-meta__box__categoryes" href="/categories/%E5%85%B4%E8%B6%A3%E7%88%B1%E5%A5%BD/"><span class="categoryes-punctuation"> <i class="anzhiyufont anzhiyu-icon-inbox"></i></span>兴趣爱好<span class="categoryesPageCount">41</span></a></div><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/Java/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Java<span class="tagsPageCount">37</span></a></div></div><div class="post_share"><div class="social-share" data-image="https://zhib0.oss-cn-hangzhou.aliyuncs.com/img/apm_pedal_20240812.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/undefined/e82f.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zhib0.oss-cn-hangzhou.aliyuncs.com/img/cyl20240610.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">java学习笔记（十三） - 常用类</div></div></a></div><div class="next-post pull-right"><a href="/undefined/460c.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zhib0.oss-cn-hangzhou.aliyuncs.com/img/qszy20240610.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">java学习笔记（二十八）- 算法优化-骑士周游问题</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/undefined/f91f.html" title="Java学习笔记（十七）--进程与线程"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zhib0.oss-cn-hangzhou.aliyuncs.com/img/xc20240610.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-03-07</div><div class="title">Java学习笔记（十七）--进程与线程</div></div></a></div><div><a href="/undefined/d3af.html" title="java学习笔记 -Spring6"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zhib0.oss-cn-hangzhou.aliyuncs.com/img/WechatIMG97.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-06-28</div><div class="title">java学习笔记 -Spring6</div></div></a></div><div><a href="/undefined/7bf7.html" title="java学习笔记 -MyBatis"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zhib0.oss-cn-hangzhou.aliyuncs.com/img/mybatis20240610.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-05-15</div><div class="title">java学习笔记 -MyBatis</div></div></a></div><div><a href="/undefined/a604.html" title="问题集合（编程报错）"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zhib0.oss-cn-hangzhou.aliyuncs.com/img/daimaquestion20240609.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-03-14</div><div class="title">问题集合（编程报错）</div></div></a></div><div><a href="/undefined/526a.html" title="java学习笔记（十） - web基础（thymeleaf）"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zhib0.oss-cn-hangzhou.aliyuncs.com/img/thymeleaf20240610.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-01-21</div><div class="title">java学习笔记（十） - web基础（thymeleaf）</div></div></a></div><div><a href="/undefined/daa1.html" title="java学习笔记 - web基础九（Session）"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zhib0.oss-cn-hangzhou.aliyuncs.com/img/WechatIMG104.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-12-09</div><div class="title">java学习笔记 - web基础九（Session）</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/./img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"/></div></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">这有关于<b style="color:#fff">产品、设计、开发</b>相关的问题和看法。</div><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">相信你可以在这里找到对你有用的<b style="color:#fff">知识</b>。</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/about"><h1 class="author-info__name">执笔</h1><div class="author-info__desc">执笔のNote</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="http://YiGeFanRen5-2.github.io" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="/1348581040@qq.com" target="_blank" title="Email"><i class="anzhiyufont anzhiyu-icon-link"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content">欢迎浏览我的笔记鸭~</div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://zhib0.oss-cn-hangzhou.aliyuncs.com/img/qrcode_bg.PNG) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://zhib0.oss-cn-hangzhou.aliyuncs.com/img/qr_bg_face.GIF) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.</span> <span class="toc-text">数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4"><span class="toc-number">1.1.</span> <span class="toc-text">基本指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%89%E5%B1%82%E7%BB%93%E6%9E%84"><span class="toc-number">1.2.</span> <span class="toc-text">数据库三层结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E8%8C%83%E5%BC%8F"><span class="toc-number">1.3.</span> <span class="toc-text">数据库的范式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E6%96%B9%E5%BC%8F"><span class="toc-number">1.4.</span> <span class="toc-text">存储方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL%E8%AF%AD%E5%8F%A5%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">1.5.</span> <span class="toc-text">SQL语句的分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C"><span class="toc-number">1.6.</span> <span class="toc-text">数据库操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.6.1.</span> <span class="toc-text">创建数据库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E3%80%81%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.6.2.</span> <span class="toc-text">查看、删除数据库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8D%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.6.3.</span> <span class="toc-text">备份和恢复数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%87%E4%BB%BD%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.6.3.1.</span> <span class="toc-text">备份数据库</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%81%A2%E5%A4%8D%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.6.3.2.</span> <span class="toc-text">恢复数据库</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8"><span class="toc-number">2.</span> <span class="toc-text">表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8"><span class="toc-number">2.1.</span> <span class="toc-text">创建表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%87%E4%BB%BD%E5%92%8C%E5%9B%9E%E5%A4%8D%E8%A1%A8"><span class="toc-number">2.2.</span> <span class="toc-text">备份和回复表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8"><span class="toc-number">2.3.</span> <span class="toc-text">修改表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A8%E5%A4%8D%E5%88%B6"><span class="toc-number">2.4.</span> <span class="toc-text">表复制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%98%BE%E7%A4%BA%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-number">2.5.</span> <span class="toc-text">显示表结构</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mysql%E5%B8%B8%E7%94%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%EF%BC%88%E5%88%97%E7%B1%BB%E5%9E%8B%EF%BC%89"><span class="toc-number">3.</span> <span class="toc-text">Mysql常用的数据类型（列类型）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B4%E6%95%B0%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.1.</span> <span class="toc-text">整数类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%8D%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.2.</span> <span class="toc-text">位类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E6%95%B0"><span class="toc-number">3.3.</span> <span class="toc-text">小数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">3.4.</span> <span class="toc-text">字符串</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93crud"><span class="toc-number">4.</span> <span class="toc-text">数据库crud</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#insert-%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE"><span class="toc-number">4.1.</span> <span class="toc-text">insert 添加数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#update-%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE"><span class="toc-number">4.2.</span> <span class="toc-text">update 修改数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#delete-%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="toc-number">4.3.</span> <span class="toc-text">delete 删除数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#select-%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE"><span class="toc-number">4.4.</span> <span class="toc-text">select 查询数据</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%AF%B9%E6%9F%A5%E8%AF%A2%E7%9A%84%E5%88%97%E8%BF%9B%E8%A1%8C%E8%BF%90%E7%AE%97"><span class="toc-number">4.4.1.</span> <span class="toc-text">使用表达式对查询的列进行运算</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%99%E5%88%97%E5%8F%96%E5%88%AB%E5%90%8D"><span class="toc-number">4.4.2.</span> <span class="toc-text">给列取别名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#where-%E9%80%89%E6%8B%A9%E6%9F%A5%E8%AF%A2"><span class="toc-number">4.4.3.</span> <span class="toc-text">where 选择查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#order-by-%E6%8E%92%E5%BA%8F%E6%9F%A5%E8%AF%A2"><span class="toc-number">4.4.4.</span> <span class="toc-text">order by 排序查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#count-%E5%90%88%E8%AE%A1%E5%87%BD%E6%95%B0"><span class="toc-number">4.4.5.</span> <span class="toc-text">count 合计函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sum-%E6%B1%82%E5%92%8C"><span class="toc-number">4.4.6.</span> <span class="toc-text">sum 求和</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AVG-%E5%B9%B3%E5%9D%87%E5%80%BC"><span class="toc-number">4.4.7.</span> <span class="toc-text">AVG 平均值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Max-Min-%E6%9C%80%E5%A4%A7-%E6%9C%80%E5%B0%8F%E5%80%BC"><span class="toc-number">4.4.8.</span> <span class="toc-text">Max&#x2F;Min 最大&#x2F;最小值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#group-by-%E5%88%86%E7%BB%84"><span class="toc-number">4.4.9.</span> <span class="toc-text">group by 分组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9B%B8%E5%85%B3%E5%87%BD%E6%95%B0"><span class="toc-number">4.4.10.</span> <span class="toc-text">字符串相关函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E5%87%BD%E6%95%B0"><span class="toc-number">4.4.11.</span> <span class="toc-text">数学相关函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E7%9B%B8%E5%85%B3%E5%87%BD%E6%95%B0"><span class="toc-number">4.4.12.</span> <span class="toc-text">时间日期相关函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A0%E5%AF%86%E5%92%8C%E7%B3%BB%E7%BB%9F%E5%87%BD%E6%95%B0"><span class="toc-number">4.4.13.</span> <span class="toc-text">加密和系统函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E5%87%BD%E6%95%B0"><span class="toc-number">4.4.14.</span> <span class="toc-text">流程控制函数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%95%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.</span> <span class="toc-text">单表查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#limit%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.1.</span> <span class="toc-text">limit分页查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%88%86%E7%BB%84"><span class="toc-number">5.2.</span> <span class="toc-text">数据分组</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-number">6.</span> <span class="toc-text">多表查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%9B%E5%8D%A1%E5%B0%94%E9%9B%86"><span class="toc-number">6.1.</span> <span class="toc-text">笛卡尔集</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E8%BF%9E%E6%8E%A5"><span class="toc-number">6.2.</span> <span class="toc-text">自连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">6.3.</span> <span class="toc-text">子查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%95%E8%A1%8C%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">6.3.1.</span> <span class="toc-text">单行子查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E8%A1%8C%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">6.3.2.</span> <span class="toc-text">多行子查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%B4%E6%97%B6%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-number">6.3.3.</span> <span class="toc-text">临时表查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#all%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">6.3.4.</span> <span class="toc-text">all操作符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#any%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">6.3.5.</span> <span class="toc-text">any操作符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E5%88%97%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">6.3.6.</span> <span class="toc-text">多列子查询</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%88%E5%B9%B6%E6%9F%A5%E8%AF%A2"><span class="toc-number">7.</span> <span class="toc-text">合并查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#union-all"><span class="toc-number">7.1.</span> <span class="toc-text">union all</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#union"><span class="toc-number">7.2.</span> <span class="toc-text">union</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-number">8.</span> <span class="toc-text">外连接</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%A6%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-number">8.1.</span> <span class="toc-text">左外连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%B3%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-number">8.2.</span> <span class="toc-text">右外连接</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mysql%E7%BA%A6%E6%9D%9F"><span class="toc-number">9.</span> <span class="toc-text">Mysql约束</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#primary-key%EF%BC%88%E4%B8%BB%E9%94%AE%EF%BC%89"><span class="toc-number">9.1.</span> <span class="toc-text">primary key（主键）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#not-null-%E9%9D%9E%E7%A9%BA"><span class="toc-number">9.2.</span> <span class="toc-text">not null(非空)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#unique-%E5%94%AF%E4%B8%80"><span class="toc-number">9.3.</span> <span class="toc-text">unique(唯一)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#foreign-key-%E5%A4%96%E9%94%AE"><span class="toc-number">9.4.</span> <span class="toc-text">foreign key(外键)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#check"><span class="toc-number">9.5.</span> <span class="toc-text">check</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%A2%9E%E9%95%BF"><span class="toc-number">10.</span> <span class="toc-text">自增长</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95"><span class="toc-number">11.</span> <span class="toc-text">索引</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E7%90%86"><span class="toc-number">11.1.</span> <span class="toc-text">原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B"><span class="toc-number">11.2.</span> <span class="toc-text">类型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1"><span class="toc-number">12.</span> <span class="toc-text">事务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E5%92%8C%E9%94%81"><span class="toc-number">12.1.</span> <span class="toc-text">事务和锁</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="toc-number">12.2.</span> <span class="toc-text">隔离级别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#acid%E7%89%B9%E6%80%A7"><span class="toc-number">12.3.</span> <span class="toc-text">acid特性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%9F%E5%AD%90%E6%80%A7%EF%BC%88Atomicity%EF%BC%89"><span class="toc-number">12.3.1.</span> <span class="toc-text">原子性（Atomicity）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E8%87%B4%E6%80%A7-Consistency"><span class="toc-number">12.3.2.</span> <span class="toc-text">一致性(Consistency)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9A%94%E7%A6%BB%E6%80%A7-lsolation"><span class="toc-number">12.3.3.</span> <span class="toc-text">隔离性(lsolation)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%81%E4%B9%85%E6%80%A7-Durability"><span class="toc-number">12.3.4.</span> <span class="toc-text">持久性(Durability)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A8%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="toc-number">12.4.</span> <span class="toc-text">表类型和存储引擎</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D"><span class="toc-number">12.4.1.</span> <span class="toc-text">介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%B9%E7%82%B9"><span class="toc-number">12.4.2.</span> <span class="toc-text">特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%89%E6%8B%A9"><span class="toc-number">12.4.3.</span> <span class="toc-text">选择</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE"><span class="toc-number">13.</span> <span class="toc-text">视图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E5%92%8C%E5%9F%BA%E8%A1%A8%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">13.1.</span> <span class="toc-text">视图和基表的关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">13.2.</span> <span class="toc-text">基本使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%86%E8%8A%82"><span class="toc-number">13.3.</span> <span class="toc-text">细节</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%B9%E7%82%B9-1"><span class="toc-number">13.3.1.</span> <span class="toc-text">特点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mysql%E7%AE%A1%E7%90%86"><span class="toc-number">14.</span> <span class="toc-text">Mysql管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C"><span class="toc-number">14.1.</span> <span class="toc-text">操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mysql%E6%9D%83%E9%99%90"><span class="toc-number">14.2.</span> <span class="toc-text">mysql权限</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%99%E7%94%A8%E6%88%B7%E6%8E%88%E6%9D%83"><span class="toc-number">14.2.1.</span> <span class="toc-text">给用户授权</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95"><span class="toc-number">14.2.1.1.</span> <span class="toc-text">语法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AF%B4%E6%98%8E"><span class="toc-number">14.2.1.2.</span> <span class="toc-text">说明</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9E%E6%94%B6%E7%94%A8%E6%88%B7%E6%8E%88%E6%9D%83"><span class="toc-number">14.2.2.</span> <span class="toc-text">回收用户授权</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E7%94%9F%E6%95%88%E6%8C%87%E4%BB%A4"><span class="toc-number">14.2.3.</span> <span class="toc-text">权限生效指令</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%86%E8%8A%82-1"><span class="toc-number">14.3.</span> <span class="toc-text">细节</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B"><span class="toc-number">15.</span> <span class="toc-text">案例</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/undefined/61401.html" title="踏板验证"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zhib0.oss-cn-hangzhou.aliyuncs.com/img/apm_pedal_20240812.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="踏板验证"/></a><div class="content"><a class="title" href="/undefined/61401.html" title="踏板验证">踏板验证</a><time datetime="2024-08-18T14:22:47.000Z" title="发表于 2024-08-18 22:22:47">2024-08-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/undefined/44993.html" title="电子油门踏板"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zhib0.oss-cn-hangzhou.aliyuncs.com/img/apm_20240810.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="电子油门踏板"/></a><div class="content"><a class="title" href="/undefined/44993.html" title="电子油门踏板">电子油门踏板</a><time datetime="2024-08-10T01:29:47.000Z" title="发表于 2024-08-10 09:29:47">2024-08-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/undefined/6209.html" title="kickdown作用"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zhib0.oss-cn-hangzhou.aliyuncs.com/img/KickDown_20240803.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="kickdown作用"/></a><div class="content"><a class="title" href="/undefined/6209.html" title="kickdown作用">kickdown作用</a><time datetime="2024-08-03T14:11:50.000Z" title="发表于 2024-08-03 22:11:50">2024-08-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/undefined/2169.html" title="机械基础 - 中性盐雾试验"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zhib0.oss-cn-hangzhou.aliyuncs.com/img/ywsy_20240718.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="机械基础 - 中性盐雾试验"/></a><div class="content"><a class="title" href="/undefined/2169.html" title="机械基础 - 中性盐雾试验">机械基础 - 中性盐雾试验</a><time datetime="2024-07-18T13:38:47.000Z" title="发表于 2024-07-18 21:38:47">2024-07-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/undefined/35642.html" title="弹簧力的计算"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zhib0.oss-cn-hangzhou.aliyuncs.com/img/springforce20240623.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="弹簧力的计算"/></a><div class="content"><a class="title" href="/undefined/35642.html" title="弹簧力的计算">弹簧力的计算</a><time datetime="2024-06-20T14:19:14.000Z" title="发表于 2024-06-20 22:19:14">2024-06-20</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo_v5.4.0"/></a><a class="github-badge" target="_blank" href="https://blog.anheyu.com/" style="margin-inline:5px" data-title="本站使用AnZhiYu主题" title="本站使用AnZhiYu主题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.9/img/Theme-AnZhiYu-2E67D3.svg" alt="本站使用AnZhiYu主题"/></a><a class="github-badge" target="_blank" href="https://www.dogecloud.com/" style="margin-inline:5px" data-title="本站使用多吉云为静态资源提供CDN加速" title="本站使用多吉云为静态资源提供CDN加速"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/CDN-多吉云-3693F3.svg" alt="本站使用多吉云为静态资源提供CDN加速"/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title="本站项目由Github托管"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Source-Github.svg" alt="本站项目由Github托管"/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/Copyright-BY-NC-SA.svg" alt="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"/></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2021 - 2024 By <a class="footer-bar-link" href="/" title="执笔" target="_blank">执笔</a></div></div><div id="footer-type-tips"></div><div class="js-pjax"><script>function subtitleType () {
  fetch('https://v1.hitokoto.cn')
    .then(response => response.json())
    .then(data => {
      if (true) {
        const from = '出自 ' + data.from
        const sub = ["生活明朗&#44; 万物可爱&#44; 人间值得&#44; 未来可期."]
        sub.unshift(data.hitokoto, from)
        window.typed = new Typed('#footer-type-tips', {
          strings: sub,
          startDelay: 300,
          typeSpeed: 150,
          loop: true,
          backSpeed: 50,
        })
      } else {
        document.getElementById('footer-type-tips').innerHTML = data.hitokoto
      }
    })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.cbd.int/typed.js@2.0.15/dist/typed.umd.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">80</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">16</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">4</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" href="/undefined/51156.html" title="zbTools"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zhib0.oss-cn-hangzhou.aliyuncs.com/img/zbTools_icon.JPG" alt="zbTools"/><span class="back-menu-item-text">zbTools</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 记录</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=934022020&amp;server=netease"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/AnsysWorkbench/" style="font-size: 0.88rem;">AnsysWorkbench<sup>8</sup></a><a href="/tags/HarmonyOS4-0/" style="font-size: 0.88rem;">HarmonyOS4.0<sup>1</sup></a><a href="/tags/Hexo/" style="font-size: 0.88rem;">Hexo<sup>3</sup></a><a href="/tags/Java/" style="font-size: 0.88rem;">Java<sup>37</sup></a><a href="/tags/Solidworks/" style="font-size: 0.88rem;">Solidworks<sup>7</sup></a><a href="/tags/%E4%B8%AA%E4%BA%BA%E6%80%BB%E7%BB%93/" style="font-size: 0.88rem;">个人总结<sup>1</sup></a><a href="/tags/%E5%B7%A5%E4%BD%9C%E6%B5%81/" style="font-size: 0.88rem;">工作流<sup>6</sup></a><a href="/tags/%E5%B7%A5%E8%89%BA/" style="font-size: 0.88rem;">工艺<sup>3</sup></a><a href="/tags/%E6%9C%89%E9%99%90%E5%85%83%E5%88%86%E6%9E%90/" style="font-size: 0.88rem;">有限元分析<sup>17</sup></a><a href="/tags/%E6%9C%BA%E6%A2%B0%E5%88%B6%E5%9B%BE/" style="font-size: 0.88rem;">机械制图<sup>5</sup></a><a href="/tags/%E6%9D%90%E6%96%99/" style="font-size: 0.88rem;">材料<sup>4</sup></a><a href="/tags/%E6%9D%90%E6%96%99%E5%8A%9B%E5%AD%A6/" style="font-size: 0.88rem;">材料力学<sup>1</sup></a><a href="/tags/%E6%A8%A1%E5%85%B7/" style="font-size: 0.88rem;">模具<sup>1</sup></a><a href="/tags/%E8%B5%84%E6%96%99/" style="font-size: 0.88rem;">资料<sup>3</sup></a><a href="/tags/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/" style="font-size: 0.88rem;">软件开发<sup>1</sup></a><a href="/tags/%E9%97%AE%E9%A2%98/" style="font-size: 0.88rem;">问题<sup>3</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="7371982444" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://music.163.com/#/my/m/music/playlist?id=7371982444&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.4/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.cbd.int/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (true){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2021 By 安知鱼 V1.6.10",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 执笔 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.cbd.int/mermaid@10.2.4/dist/mermaid.min.js').then(runMermaid)
  }

  anzhiyu.addGlobalFn('themeChange', runMermaid, 'mermaid')

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://blog-five-beige-67.vercel.app',
      region: '',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.25/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://blog-five-beige-67.vercel.app',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://blog-five-beige-67.vercel.app',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.25/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script>var visitorMail = "visitor@anheyu.com";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script id="click-show-text" src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="true" data-text="富强,民主,文明,和谐,自由,平等,公正,法治,爱国,敬业,诚信,友善" data-fontsize="15px" data-random="true" async="async"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"]):not([href="/music/"]):not([href="/no-pjax/"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>